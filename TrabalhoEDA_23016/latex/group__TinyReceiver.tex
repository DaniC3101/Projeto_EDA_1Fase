\doxysection{Minimal receiver for NEC and FAST protocol}
\hypertarget{group__TinyReceiver}{}\label{group__TinyReceiver}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structTinyIRReceiverStruct}{Tiny\+IRReceiver\+Struct}}
\item 
struct \mbox{\hyperlink{structTinyIRReceiverCallbackDataStruct}{Tiny\+IRReceiver\+Callback\+Data\+Struct}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{group__TinyReceiver_gab740dd587f2603ebf1183bd8043e5153}\label{group__TinyReceiver_gab740dd587f2603ebf1183bd8043e5153} 
\#define {\bfseries VERSION\+\_\+\+TINYIR}~"{}2.\+2.\+0"{}
\item 
\Hypertarget{group__TinyReceiver_ga05c4dfc623d9ab9c3f6c7da81d361a0b}\label{group__TinyReceiver_ga05c4dfc623d9ab9c3f6c7da81d361a0b} 
\#define {\bfseries VERSION\+\_\+\+TINYIR\+\_\+\+MAJOR}~2
\item 
\Hypertarget{group__TinyReceiver_gabbfb8e770c41cbdcf0afd3ef243e0d3c}\label{group__TinyReceiver_gabbfb8e770c41cbdcf0afd3ef243e0d3c} 
\#define {\bfseries VERSION\+\_\+\+TINYIR\+\_\+\+MINOR}~2
\item 
\Hypertarget{group__TinyReceiver_ga8223f29625c671b7a921a502f8cca06d}\label{group__TinyReceiver_ga8223f29625c671b7a921a502f8cca06d} 
\#define {\bfseries VERSION\+\_\+\+TINYIR\+\_\+\+PATCH}~0
\item 
\#define \mbox{\hyperlink{group__TinyReceiver_ga2ab110e480a4b16fe516c2afd16a1ea2}{NEC\+\_\+\+ADDRESS\+\_\+\+BITS}}~16
\item 
\Hypertarget{group__TinyReceiver_ga07e295da53565eb7146072bdfeb2ed32}\label{group__TinyReceiver_ga07e295da53565eb7146072bdfeb2ed32} 
\#define {\bfseries NEC\+\_\+\+COMMAND\+\_\+\+BITS}~16
\item 
\Hypertarget{group__TinyReceiver_gaa82c77bc0131ac28bc3534b8cf3422bc}\label{group__TinyReceiver_gaa82c77bc0131ac28bc3534b8cf3422bc} 
\#define {\bfseries NEC\+\_\+\+BITS}~(NEC\+\_\+\+ADDRESS\+\_\+\+BITS + NEC\+\_\+\+COMMAND\+\_\+\+BITS)
\item 
\Hypertarget{group__TinyReceiver_gaf3317b0cf5cf7d3063addbaa0a256158}\label{group__TinyReceiver_gaf3317b0cf5cf7d3063addbaa0a256158} 
\#define {\bfseries NEC\+\_\+\+UNIT}~560
\item 
\Hypertarget{group__TinyReceiver_ga8d393b95d8df4dfa15873aec6a37965e}\label{group__TinyReceiver_ga8d393b95d8df4dfa15873aec6a37965e} 
\#define {\bfseries NEC\+\_\+\+HEADER\+\_\+\+MARK}~(16 \texorpdfstring{$\ast$}{*} NEC\+\_\+\+UNIT)
\item 
\Hypertarget{group__TinyReceiver_ga5c728ed320ffee624e26767be0a80404}\label{group__TinyReceiver_ga5c728ed320ffee624e26767be0a80404} 
\#define {\bfseries NEC\+\_\+\+HEADER\+\_\+\+SPACE}~(8 \texorpdfstring{$\ast$}{*} NEC\+\_\+\+UNIT)
\item 
\Hypertarget{group__TinyReceiver_ga3abbe30ef3781c1cf2490003e1c1443a}\label{group__TinyReceiver_ga3abbe30ef3781c1cf2490003e1c1443a} 
\#define {\bfseries NEC\+\_\+\+BIT\+\_\+\+MARK}~NEC\+\_\+\+UNIT
\item 
\Hypertarget{group__TinyReceiver_ga5ac04ec8b2185c9fb257d39c472733b1}\label{group__TinyReceiver_ga5ac04ec8b2185c9fb257d39c472733b1} 
\#define {\bfseries NEC\+\_\+\+ONE\+\_\+\+SPACE}~(3 \texorpdfstring{$\ast$}{*} NEC\+\_\+\+UNIT)
\item 
\Hypertarget{group__TinyReceiver_ga5ee46914e98bf7f87f32a7104843b243}\label{group__TinyReceiver_ga5ee46914e98bf7f87f32a7104843b243} 
\#define {\bfseries NEC\+\_\+\+ZERO\+\_\+\+SPACE}~NEC\+\_\+\+UNIT
\item 
\Hypertarget{group__TinyReceiver_ga91880ffa0b09391f2c827d3a1c565abf}\label{group__TinyReceiver_ga91880ffa0b09391f2c827d3a1c565abf} 
\#define {\bfseries NEC\+\_\+\+REPEAT\+\_\+\+HEADER\+\_\+\+SPACE}~(4 \texorpdfstring{$\ast$}{*} NEC\+\_\+\+UNIT)
\item 
\Hypertarget{group__TinyReceiver_gac2dab5c4a22f8c4915217d3ee4676f08}\label{group__TinyReceiver_gac2dab5c4a22f8c4915217d3ee4676f08} 
\#define {\bfseries NEC\+\_\+\+REPEAT\+\_\+\+PERIOD}~110000
\item 
\Hypertarget{group__TinyReceiver_ga7445961959fb69fed84c046145402045}\label{group__TinyReceiver_ga7445961959fb69fed84c046145402045} 
\#define {\bfseries NEC\+\_\+\+MINIMAL\+\_\+\+DURATION}~49900
\item 
\Hypertarget{group__TinyReceiver_ga39b7e9de38af79c826aff1df717aef6d}\label{group__TinyReceiver_ga39b7e9de38af79c826aff1df717aef6d} 
\#define {\bfseries NEC\+\_\+\+MAXIMUM\+\_\+\+REPEAT\+\_\+\+DISTANCE}~(NEC\+\_\+\+REPEAT\+\_\+\+PERIOD -\/ NEC\+\_\+\+MINIMAL\+\_\+\+DURATION + 10000)
\item 
\#define \mbox{\hyperlink{group__TinyReceiver_ga433cb7141a714640247d749a232f71e9}{FAST\+\_\+\+KHZ}}~38
\item 
\Hypertarget{group__TinyReceiver_ga31545568310c2a958279c3cb31287067}\label{group__TinyReceiver_ga31545568310c2a958279c3cb31287067} 
\#define {\bfseries FAST\+\_\+\+ADDRESS\+\_\+\+BITS}~0
\item 
\Hypertarget{group__TinyReceiver_ga8cd04aae5069c6ca9bb6f537574f5f01}\label{group__TinyReceiver_ga8cd04aae5069c6ca9bb6f537574f5f01} 
\#define {\bfseries FAST\+\_\+\+COMMAND\+\_\+\+BITS}~16
\item 
\Hypertarget{group__TinyReceiver_gadd78822c51f4692289f2ce174bdf82b0}\label{group__TinyReceiver_gadd78822c51f4692289f2ce174bdf82b0} 
\#define {\bfseries FAST\+\_\+\+BITS}~(FAST\+\_\+\+ADDRESS\+\_\+\+BITS + FAST\+\_\+\+COMMAND\+\_\+\+BITS)
\item 
\Hypertarget{group__TinyReceiver_gaa8ee2ed0948e4f4382b020c5bcea4e8f}\label{group__TinyReceiver_gaa8ee2ed0948e4f4382b020c5bcea4e8f} 
\#define {\bfseries FAST\+\_\+\+UNIT}~526
\item 
\Hypertarget{group__TinyReceiver_gad0e804e9cefa097c4f675793f68e1872}\label{group__TinyReceiver_gad0e804e9cefa097c4f675793f68e1872} 
\#define {\bfseries FAST\+\_\+\+BIT\+\_\+\+MARK}~FAST\+\_\+\+UNIT
\item 
\Hypertarget{group__TinyReceiver_ga3328b696c6fa6b4dcf75fd608ede42be}\label{group__TinyReceiver_ga3328b696c6fa6b4dcf75fd608ede42be} 
\#define {\bfseries FAST\+\_\+\+ONE\+\_\+\+SPACE}~(3 \texorpdfstring{$\ast$}{*} FAST\+\_\+\+UNIT)
\item 
\Hypertarget{group__TinyReceiver_ga45f7bfdc1ec78bb187031df82d97a9b1}\label{group__TinyReceiver_ga45f7bfdc1ec78bb187031df82d97a9b1} 
\#define {\bfseries FAST\+\_\+\+ZERO\+\_\+\+SPACE}~FAST\+\_\+\+UNIT
\item 
\Hypertarget{group__TinyReceiver_ga533fde31d6c3cab34ddeefbe26183427}\label{group__TinyReceiver_ga533fde31d6c3cab34ddeefbe26183427} 
\#define {\bfseries FAST\+\_\+\+HEADER\+\_\+\+MARK}~(4 \texorpdfstring{$\ast$}{*} FAST\+\_\+\+UNIT)
\item 
\Hypertarget{group__TinyReceiver_ga14bff3efcd02e7c95ffb4a1220e7b86a}\label{group__TinyReceiver_ga14bff3efcd02e7c95ffb4a1220e7b86a} 
\#define {\bfseries FAST\+\_\+\+HEADER\+\_\+\+SPACE}~(2 \texorpdfstring{$\ast$}{*} FAST\+\_\+\+UNIT)
\item 
\Hypertarget{group__TinyReceiver_ga2c359cbdc94b7c6c8e7fdcd5554f82d3}\label{group__TinyReceiver_ga2c359cbdc94b7c6c8e7fdcd5554f82d3} 
\#define {\bfseries FAST\+\_\+\+REPEAT\+\_\+\+PERIOD}~50000
\item 
\Hypertarget{group__TinyReceiver_ga134f64dbd20f429bdced06c5968ae6db}\label{group__TinyReceiver_ga134f64dbd20f429bdced06c5968ae6db} 
\#define {\bfseries FAST\+\_\+\+REPEAT\+\_\+\+DISTANCE}~(FAST\+\_\+\+REPEAT\+\_\+\+PERIOD -\/ (55 \texorpdfstring{$\ast$}{*} FAST\+\_\+\+UNIT))
\item 
\Hypertarget{group__TinyReceiver_gaac531fcf99de73123948940ccca7d7bb}\label{group__TinyReceiver_gaac531fcf99de73123948940ccca7d7bb} 
\#define {\bfseries FAST\+\_\+\+MAXIMUM\+\_\+\+REPEAT\+\_\+\+DISTANCE}~(FAST\+\_\+\+REPEAT\+\_\+\+DISTANCE + 10000)
\item 
\Hypertarget{group__TinyReceiver_gaa86e62c87863e10d44fcf9047d3802bd}\label{group__TinyReceiver_gaa86e62c87863e10d44fcf9047d3802bd} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+ADDRESS\+\_\+\+BITS}~NEC\+\_\+\+ADDRESS\+\_\+\+BITS
\item 
\Hypertarget{group__TinyReceiver_ga771b0ae69abb340bb723b3e49698e946}\label{group__TinyReceiver_ga771b0ae69abb340bb723b3e49698e946} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+ADDRESS\+\_\+\+HAS\+\_\+8\+\_\+\+BIT\+\_\+\+PARITY}~true
\item 
\Hypertarget{group__TinyReceiver_gadf2baa0ff9b72fa7543d4f733d07b43c}\label{group__TinyReceiver_gadf2baa0ff9b72fa7543d4f733d07b43c} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+COMMAND\+\_\+\+BITS}~NEC\+\_\+\+COMMAND\+\_\+\+BITS
\item 
\Hypertarget{group__TinyReceiver_ga8c1b71ffa47b7ca81c1152040d512ccf}\label{group__TinyReceiver_ga8c1b71ffa47b7ca81c1152040d512ccf} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+COMMAND\+\_\+\+HAS\+\_\+8\+\_\+\+BIT\+\_\+\+PARITY}~true
\item 
\Hypertarget{group__TinyReceiver_ga175ce9f07102c40f6cb730f12ddb6a17}\label{group__TinyReceiver_ga175ce9f07102c40f6cb730f12ddb6a17} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+BITS}~NEC\+\_\+\+BITS
\item 
\Hypertarget{group__TinyReceiver_gae2ffd84c9910eae58166b1e71f3c1c9e}\label{group__TinyReceiver_gae2ffd84c9910eae58166b1e71f3c1c9e} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+UNIT}~NEC\+\_\+\+UNIT
\item 
\Hypertarget{group__TinyReceiver_ga02b86589f51233381c98c1d8fecb16cf}\label{group__TinyReceiver_ga02b86589f51233381c98c1d8fecb16cf} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+HEADER\+\_\+\+MARK}~NEC\+\_\+\+HEADER\+\_\+\+MARK
\item 
\Hypertarget{group__TinyReceiver_gad8a578b8524aec9a94c33b8d869429c8}\label{group__TinyReceiver_gad8a578b8524aec9a94c33b8d869429c8} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+HEADER\+\_\+\+SPACE}~NEC\+\_\+\+HEADER\+\_\+\+SPACE
\item 
\Hypertarget{group__TinyReceiver_gaa70bb82f3342768a4c569172a475fe41}\label{group__TinyReceiver_gaa70bb82f3342768a4c569172a475fe41} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+BIT\+\_\+\+MARK}~NEC\+\_\+\+BIT\+\_\+\+MARK
\item 
\Hypertarget{group__TinyReceiver_ga2fb6634355355f0430d1017a17e837ca}\label{group__TinyReceiver_ga2fb6634355355f0430d1017a17e837ca} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+ONE\+\_\+\+SPACE}~NEC\+\_\+\+ONE\+\_\+\+SPACE
\item 
\Hypertarget{group__TinyReceiver_ga45b68ccfb2ae010dd9c7d3a48d12810b}\label{group__TinyReceiver_ga45b68ccfb2ae010dd9c7d3a48d12810b} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+ZERO\+\_\+\+SPACE}~NEC\+\_\+\+ZERO\+\_\+\+SPACE
\item 
\Hypertarget{group__TinyReceiver_gad3cedd13814cc47e25d501fea6d9d90e}\label{group__TinyReceiver_gad3cedd13814cc47e25d501fea6d9d90e} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+MAXIMUM\+\_\+\+REPEAT\+\_\+\+DISTANCE}~NEC\+\_\+\+MAXIMUM\+\_\+\+REPEAT\+\_\+\+DISTANCE
\item 
\Hypertarget{group__TinyReceiver_gaf33c8a218dd35ede965cf20a68a0068d}\label{group__TinyReceiver_gaf33c8a218dd35ede965cf20a68a0068d} 
\#define {\bfseries MICROS\+\_\+\+IN\+\_\+\+ONE\+\_\+\+SECOND}~1000000L
\item 
\Hypertarget{group__TinyReceiver_gae9ba0b7dd556e22688f7da01019bba68}\label{group__TinyReceiver_gae9ba0b7dd556e22688f7da01019bba68} 
\#define {\bfseries MICROS\+\_\+\+IN\+\_\+\+ONE\+\_\+\+MILLI}~1000L
\item 
\#define \mbox{\hyperlink{group__TinyReceiver_ga02b97ed6af9381a224ea3be0cab054a0}{lower\+Value25\+Percent}}(a\+Duration)
\item 
\#define \mbox{\hyperlink{group__TinyReceiver_ga22a6cd77d395a6c06686eafdf9aa2b52}{upper\+Value25\+Percent}}(a\+Duration)
\item 
\#define \mbox{\hyperlink{group__TinyReceiver_ga46e492bdd0789424ce0c1eafdaddcd05}{lower\+Value50\+Percent}}(a\+Duration)
\item 
\#define \mbox{\hyperlink{group__TinyReceiver_ga352aba643df683019cddd3ae28c80def}{upper\+Value50\+Percent}}(a\+Duration)
\item 
\Hypertarget{group__TinyReceiver_ga2535b0f1ae380b696c6a37ffa69b3df3}\label{group__TinyReceiver_ga2535b0f1ae380b696c6a37ffa69b3df3} 
\#define {\bfseries IR\+\_\+\+RECEIVER\+\_\+\+STATE\+\_\+\+WAITING\+\_\+\+FOR\+\_\+\+START\+\_\+\+MARK}~0
\item 
\Hypertarget{group__TinyReceiver_ga43017cba7c72b3f0d45265f417e5195d}\label{group__TinyReceiver_ga43017cba7c72b3f0d45265f417e5195d} 
\#define {\bfseries IR\+\_\+\+RECEIVER\+\_\+\+STATE\+\_\+\+WAITING\+\_\+\+FOR\+\_\+\+START\+\_\+\+SPACE}~1
\item 
\Hypertarget{group__TinyReceiver_gaecf505182d1fa2aa885fcde6cd4160bf}\label{group__TinyReceiver_gaecf505182d1fa2aa885fcde6cd4160bf} 
\#define {\bfseries IR\+\_\+\+RECEIVER\+\_\+\+STATE\+\_\+\+WAITING\+\_\+\+FOR\+\_\+\+FIRST\+\_\+\+DATA\+\_\+\+MARK}~2
\item 
\Hypertarget{group__TinyReceiver_gad3b7237c2aa120840c0eed233d5c627e}\label{group__TinyReceiver_gad3b7237c2aa120840c0eed233d5c627e} 
\#define {\bfseries IR\+\_\+\+RECEIVER\+\_\+\+STATE\+\_\+\+WAITING\+\_\+\+FOR\+\_\+\+DATA\+\_\+\+SPACE}~3
\item 
\Hypertarget{group__TinyReceiver_gae237abb240b59b9c8dd7d853fc3c76b1}\label{group__TinyReceiver_gae237abb240b59b9c8dd7d853fc3c76b1} 
\#define {\bfseries IR\+\_\+\+RECEIVER\+\_\+\+STATE\+\_\+\+WAITING\+\_\+\+FOR\+\_\+\+DATA\+\_\+\+MARK}~4
\item 
\Hypertarget{group__TinyReceiver_ga2f6f17e18c7b5f1ef4b9cfc907d086e4}\label{group__TinyReceiver_ga2f6f17e18c7b5f1ef4b9cfc907d086e4} 
\#define {\bfseries IR\+\_\+\+RECEIVER\+\_\+\+STATE\+\_\+\+WAITING\+\_\+\+FOR\+\_\+\+STOP\+\_\+\+MARK}~5
\item 
\Hypertarget{group__TinyReceiver_gad670ce496c4a3352cb9929284db11928}\label{group__TinyReceiver_gad670ce496c4a3352cb9929284db11928} 
\#define {\bfseries IRDATA\+\_\+\+FLAGS\+\_\+\+EMPTY}~0x00
\item 
\Hypertarget{group__TinyReceiver_gaaa9952cd64b58083c28873484c494abf}\label{group__TinyReceiver_gaaa9952cd64b58083c28873484c494abf} 
\#define {\bfseries IRDATA\+\_\+\+FLAGS\+\_\+\+IS\+\_\+\+REPEAT}~0x01
\item 
\Hypertarget{group__TinyReceiver_ga5c5e6ae69aa440bfa132550d120ace08}\label{group__TinyReceiver_ga5c5e6ae69aa440bfa132550d120ace08} 
\#define {\bfseries IRDATA\+\_\+\+FLAGS\+\_\+\+IS\+\_\+\+AUTO\+\_\+\+REPEAT}~0x02
\item 
\Hypertarget{group__TinyReceiver_ga1a60f95f0885b1865dc5514ddd80e093}\label{group__TinyReceiver_ga1a60f95f0885b1865dc5514ddd80e093} 
\#define {\bfseries IRDATA\+\_\+\+FLAGS\+\_\+\+PARITY\+\_\+\+FAILED}~0x04
\begin{DoxyCompactList}\small\item\em the current (autorepeat) frame violated parity check \end{DoxyCompactList}\item 
\Hypertarget{group__TinyReceiver_ga32204b2259848fb5fdcf5cec09b6437a}\label{group__TinyReceiver_ga32204b2259848fb5fdcf5cec09b6437a} 
\#define {\bfseries IR\+\_\+\+RECEIVE\+\_\+\+PIN}~2
\item 
\Hypertarget{group__TinyReceiver_gae7054616db7e69e979dfcd5ad38fb968}\label{group__TinyReceiver_gae7054616db7e69e979dfcd5ad38fb968} 
\#define {\bfseries TINY\+\_\+\+RECEIVER\+\_\+\+USE\+\_\+\+ARDUINO\+\_\+\+ATTACH\+\_\+\+INTERRUPT}
\item 
\Hypertarget{group__TinyReceiver_gafae76562a7daac7eba30e8c5439f2cf7}\label{group__TinyReceiver_gafae76562a7daac7eba30e8c5439f2cf7} 
\#define {\bfseries USE\+\_\+\+ATTACH\+\_\+\+INTERRUPT}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{group__TinyReceiver_ga2553571086097dd6e7ba319a6da2c743}{is\+IRReceiver\+Attached\+For\+Tiny\+Receiver}} ()
\item 
bool \mbox{\hyperlink{group__TinyReceiver_gaafb51bc656ba199129d261afa3f950c2}{init\+PCIInterrupt\+For\+Tiny\+Receiver}} ()
\item 
bool \mbox{\hyperlink{group__TinyReceiver_gacc1eec5de7563e88aa73d16aa9e60a10}{enable\+PCIInterrupt\+For\+Tiny\+Receiver}} ()
\item 
void \mbox{\hyperlink{group__TinyReceiver_ga4217cae1ded4a9b2ed54bc3a1e8cd86e}{disable\+PCIInterrupt\+For\+Tiny\+Receiver}} ()
\item 
bool \mbox{\hyperlink{group__TinyReceiver_gab65e33fe496d3bee4af897e5d8bd9420}{is\+Tiny\+Receiver\+Idle}} ()
\item 
bool \mbox{\hyperlink{group__TinyReceiver_gaa97ef3a9ba3e40bd50a906788b65e79a}{Tiny\+Receiver\+Decode}} ()
\item 
void \mbox{\hyperlink{group__TinyReceiver_ga27649645d9280dfaee8095ce2dcf8f07}{print\+Tiny\+Receiver\+Result\+Minimal}} (Print \texorpdfstring{$\ast$}{*}a\+Serial)
\item 
void \mbox{\hyperlink{group__TinyReceiver_ga5d40a2ebca50382f9ddc8210cd82ebcd}{send\+FAST}} (uint8\+\_\+t a\+Send\+Pin, uint16\+\_\+t a\+Command, uint\+\_\+fast8\+\_\+t a\+Number\+Of\+Repeats=0)
\item 
void \mbox{\hyperlink{group__TinyReceiver_ga21e45ae5abbd50dcf77693c87c01cc71}{send\+Fast8\+Bit\+And\+Parity}} (uint8\+\_\+t a\+Send\+Pin, uint8\+\_\+t a\+Command, uint\+\_\+fast8\+\_\+t a\+Number\+Of\+Repeats=0)
\item 
void \mbox{\hyperlink{group__TinyReceiver_ga42ba5dff1100c121334ae46c000631e2}{send\+ONKYO}} (uint8\+\_\+t a\+Send\+Pin, uint16\+\_\+t a\+Address, uint16\+\_\+t a\+Command, uint\+\_\+fast8\+\_\+t a\+Number\+Of\+Repeats=0, bool a\+Send\+NEC2\+Repeats=false)
\item 
void \mbox{\hyperlink{group__TinyReceiver_gad46384dcfa939b9ed9538b6c907acb1f}{send\+NECMinimal}} (uint8\+\_\+t a\+Send\+Pin, uint16\+\_\+t a\+Address, uint16\+\_\+t a\+Command, uint\+\_\+fast8\+\_\+t a\+Number\+Of\+Repeats=0) \+\_\+\+\_\+attribute\+\_\+\+\_\+((deprecated("{}Renamed to send\+NEC()."{})))
\item 
void \mbox{\hyperlink{group__TinyReceiver_gad56f6ae51db2f76f6b48bd6eb621b55d}{send\+NEC}} (uint8\+\_\+t a\+Send\+Pin, uint16\+\_\+t a\+Address, uint16\+\_\+t a\+Command, uint\+\_\+fast8\+\_\+t a\+Number\+Of\+Repeats=0, bool a\+Send\+NEC2\+Repeats=false)
\item 
void \mbox{\hyperlink{group__TinyReceiver_ga2f9e7eb2572eabb1fb55a5e112a7afdb}{send\+Extended\+NEC}} (uint8\+\_\+t a\+Send\+Pin, uint16\+\_\+t a\+Address, uint16\+\_\+t a\+Command, uint\+\_\+fast8\+\_\+t a\+Number\+Of\+Repeats=0, bool a\+Send\+NEC2\+Repeats=false)
\item 
void \mbox{\hyperlink{group__TinyReceiver_gaa968353e3a3d31ca950fe4dd5be38b71}{handle\+Tiny\+Received\+IRData}} ()
\item 
void \mbox{\hyperlink{group__TinyReceiver_ga3c3d6703d25dbcc0555823e23eec0e69}{IRPin\+Change\+Interrupt\+Handler}} (void)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{group__TinyReceiver_gab367546db9f1c8a232471ca8b6e27053}\label{group__TinyReceiver_gab367546db9f1c8a232471ca8b6e27053} 
volatile \mbox{\hyperlink{structTinyIRReceiverCallbackDataStruct}{Tiny\+IRReceiver\+Callback\+Data\+Struct}} {\bfseries Tiny\+IRReceiver\+Data}
\item 
\Hypertarget{group__TinyReceiver_ga30567324f26c2fae24bb11592262b6d3}\label{group__TinyReceiver_ga30567324f26c2fae24bb11592262b6d3} 
\mbox{\hyperlink{structTinyIRReceiverStruct}{Tiny\+IRReceiver\+Struct}} {\bfseries Tiny\+IRReceiver\+Control}
\item 
\Hypertarget{group__TinyReceiver_gab367546db9f1c8a232471ca8b6e27053}\label{group__TinyReceiver_gab367546db9f1c8a232471ca8b6e27053} 
volatile \mbox{\hyperlink{structTinyIRReceiverCallbackDataStruct}{Tiny\+IRReceiver\+Callback\+Data\+Struct}} {\bfseries Tiny\+IRReceiver\+Data}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{group__TinyReceiver_ga433cb7141a714640247d749a232f71e9}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!FAST\_KHZ@{FAST\_KHZ}}
\index{FAST\_KHZ@{FAST\_KHZ}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{FAST\_KHZ}{FAST\_KHZ}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga433cb7141a714640247d749a232f71e9} 
\#define FAST\+\_\+\+KHZ~38}

The FAST protocol is a proprietary modified JVC protocol without address, with parity and with a shorter header. FAST protocol characteristics\+:
\begin{DoxyItemize}
\item Bit timing is like NEC or JVC
\item The header is shorter, 3156 vs. 12500
\item No address and 16 bit data, interpreted as 8 bit command and 8 bit inverted command, leading to a fixed protocol length of (6 + (16 \texorpdfstring{$\ast$}{*} 3) + 1) \texorpdfstring{$\ast$}{*} 526 = 55 \texorpdfstring{$\ast$}{*} 526 = 28930 microseconds or 29 ms.
\item Repeats are sent as complete frames but in a 50 ms period / with a 21 ms distance. 
\end{DoxyItemize}\Hypertarget{group__TinyReceiver_ga02b97ed6af9381a224ea3be0cab054a0}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!lowerValue25Percent@{lowerValue25Percent}}
\index{lowerValue25Percent@{lowerValue25Percent}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{lowerValue25Percent}{lowerValue25Percent}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga02b97ed6af9381a224ea3be0cab054a0} 
\#define lower\+Value25\+Percent(\begin{DoxyParamCaption}\item[{}]{a\+Duration}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{(aDuration\ -\/\ (aDuration\ /\ 4))}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_ga46e492bdd0789424ce0c1eafdaddcd05}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!lowerValue50Percent@{lowerValue50Percent}}
\index{lowerValue50Percent@{lowerValue50Percent}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{lowerValue50Percent}{lowerValue50Percent}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga46e492bdd0789424ce0c1eafdaddcd05} 
\#define lower\+Value50\+Percent(\begin{DoxyParamCaption}\item[{}]{a\+Duration}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{(aDuration\ /\ 2)}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_ga2ab110e480a4b16fe516c2afd16a1ea2}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!NEC\_ADDRESS\_BITS@{NEC\_ADDRESS\_BITS}}
\index{NEC\_ADDRESS\_BITS@{NEC\_ADDRESS\_BITS}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{NEC\_ADDRESS\_BITS}{NEC\_ADDRESS\_BITS}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga2ab110e480a4b16fe516c2afd16a1ea2} 
\#define NEC\+\_\+\+ADDRESS\+\_\+\+BITS~16}

Timing for NEC protocol

see\+: \href{https://www.sbprojects.net/knowledge/ir/nec.php}{\texttt{ https\+://www.\+sbprojects.\+net/knowledge/ir/nec.\+php}} LSB first, 1 start bit + 16 bit address + 8 bit data + 8 bit inverted data + 1 stop bit. \Hypertarget{group__TinyReceiver_ga22a6cd77d395a6c06686eafdf9aa2b52}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!upperValue25Percent@{upperValue25Percent}}
\index{upperValue25Percent@{upperValue25Percent}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{upperValue25Percent}{upperValue25Percent}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga22a6cd77d395a6c06686eafdf9aa2b52} 
\#define upper\+Value25\+Percent(\begin{DoxyParamCaption}\item[{}]{a\+Duration}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{(aDuration\ +\ (aDuration\ /\ 4))}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_ga352aba643df683019cddd3ae28c80def}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!upperValue50Percent@{upperValue50Percent}}
\index{upperValue50Percent@{upperValue50Percent}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{upperValue50Percent}{upperValue50Percent}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga352aba643df683019cddd3ae28c80def} 
\#define upper\+Value50\+Percent(\begin{DoxyParamCaption}\item[{}]{a\+Duration}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{(aDuration\ +\ (aDuration\ /\ 2))}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\Hypertarget{group__TinyReceiver_ga4217cae1ded4a9b2ed54bc3a1e8cd86e}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!disablePCIInterruptForTinyReceiver@{disablePCIInterruptForTinyReceiver}}
\index{disablePCIInterruptForTinyReceiver@{disablePCIInterruptForTinyReceiver}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{disablePCIInterruptForTinyReceiver()}{disablePCIInterruptForTinyReceiver()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga4217cae1ded4a9b2ed54bc3a1e8cd86e} 
void disable\+PCIInterrupt\+For\+Tiny\+Receiver (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00631\ \textcolor{preprocessor}{\#if\ defined(\_IR\_MEASURE\_TIMING)\ \&\&\ defined(\_IR\_TIMING\_TEST\_PIN)}}
\DoxyCodeLine{00632\ \ \ \ \ pinModeFast(\_IR\_TIMING\_TEST\_PIN,\ OUTPUT);}
\DoxyCodeLine{00633\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00635\ \textcolor{preprocessor}{\#if\ defined(USE\_ATTACH\_INTERRUPT)\ ||\ defined(USE\_ATTACH\_INTERRUPT\_DIRECT)}}
\DoxyCodeLine{00636\ \textcolor{preprocessor}{\#\ \ if\ defined(USE\_ATTACH\_INTERRUPT)}}
\DoxyCodeLine{00637\ \ \ \ \ detachInterrupt(digitalPinToInterrupt(IR\_RECEIVE\_PIN));}
\DoxyCodeLine{00638\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{00639\ \ \ \ \ detachInterrupt(IR\_RECEIVE\_PIN);}
\DoxyCodeLine{00640\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00641\ }
\DoxyCodeLine{00642\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00643\ \textcolor{preprocessor}{\#\ \ if\ defined(USE\_INT0)}}
\DoxyCodeLine{00644\ \ \ \ \ \textcolor{comment}{//\ clear\ interrupt\ bit}}
\DoxyCodeLine{00645\ \ \ \ \ EIFR\ |=\ 1\ <<\ INTF0;}
\DoxyCodeLine{00646\ \ \ \ \ \textcolor{comment}{//\ disable\ interrupt\ on\ next\ change}}
\DoxyCodeLine{00647\ \ \ \ \ EIMSK\ \&=\ \string~(1\ <<\ INT0);}
\DoxyCodeLine{00648\ }
\DoxyCodeLine{00649\ \textcolor{preprocessor}{\#\ \ elif\ defined(USE\_INT1)}}
\DoxyCodeLine{00650\ \ \ \ \ \textcolor{comment}{//\ clear\ interrupt\ bit}}
\DoxyCodeLine{00651\ \ \ \ \ EIFR\ |=\ 1\ <<\ INTF1;}
\DoxyCodeLine{00652\ \ \ \ \ \textcolor{comment}{//\ disable\ interrupt\ on\ next\ change}}
\DoxyCodeLine{00653\ \ \ \ \ EIMSK\ \&=\ \string~(1\ <<\ INT1);}
\DoxyCodeLine{00654\ }
\DoxyCodeLine{00655\ \textcolor{preprocessor}{\#\ \ elif\ defined(USE\_PCIE)\ }\textcolor{comment}{//\ For\ ATtiny85\ etc.}}
\DoxyCodeLine{00656\ \ \ \ \ \textcolor{comment}{//\ clear\ interrupt\ bit}}
\DoxyCodeLine{00657\ \ \ \ \ GIFR\ |=\ 1\ <<\ PCIF;}
\DoxyCodeLine{00658\ \ \ \ \ \textcolor{comment}{//\ disable\ interrupt\ on\ next\ change}}
\DoxyCodeLine{00659\ \ \ \ \ GIMSK\ \&=\ \string~(1\ <<\ PCIE);}
\DoxyCodeLine{00660\ }
\DoxyCodeLine{00661\ \textcolor{preprocessor}{\#\ \ elif\ defined(USE\_PCINT0)}}
\DoxyCodeLine{00662\ \ \ \ \ PCICR\ \&=\ \string~(\_BV(PCIE0));}
\DoxyCodeLine{00663\ \textcolor{preprocessor}{\#\ \ elif\ defined(USE\_PCINT1)}}
\DoxyCodeLine{00664\ \ \ \ \ PCICR\ \&=\ \string~(\_BV(PCIE1));}
\DoxyCodeLine{00665\ \textcolor{preprocessor}{\#\ \ elif\ defined(USE\_PCINT2)}}
\DoxyCodeLine{00666\ \ \ \ \ PCICR\ \&=\ \string~(\_BV(PCIE2));}
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00668\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00669\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ defined(USE\_ATTACH\_INTERRUPT)}}
\DoxyCodeLine{00670\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_gacc1eec5de7563e88aa73d16aa9e60a10}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!enablePCIInterruptForTinyReceiver@{enablePCIInterruptForTinyReceiver}}
\index{enablePCIInterruptForTinyReceiver@{enablePCIInterruptForTinyReceiver}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{enablePCIInterruptForTinyReceiver()}{enablePCIInterruptForTinyReceiver()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_gacc1eec5de7563e88aa73d16aa9e60a10} 
bool enable\+PCIInterrupt\+For\+Tiny\+Receiver (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Initializes hardware interrupt generation according to IR\+\_\+\+RECEIVE\+\_\+\+PIN or use attach\+Interrupt() function. \begin{DoxyReturn}{Returns}
true if interrupt was successfully enabled 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00565\ \textcolor{preprocessor}{\#if\ defined(\_IR\_MEASURE\_TIMING)\ \&\&\ defined(\_IR\_TIMING\_TEST\_PIN)}}
\DoxyCodeLine{00566\ \ \ \ \ pinModeFast(\_IR\_TIMING\_TEST\_PIN,\ OUTPUT);}
\DoxyCodeLine{00567\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ \textcolor{preprocessor}{\#if\ defined(USE\_ATTACH\_INTERRUPT)\ ||\ defined(USE\_ATTACH\_INTERRUPT\_DIRECT)}}
\DoxyCodeLine{00570\ \textcolor{preprocessor}{\#\ \ if\ defined(USE\_ATTACH\_INTERRUPT)}}
\DoxyCodeLine{00571\ \textcolor{preprocessor}{\#if\ defined(NOT\_AN\_INTERRUPT)}}
\DoxyCodeLine{00572\ \ \ \ \ \textcolor{keywordflow}{if}(digitalPinToInterrupt(IR\_RECEIVE\_PIN)\ ==\ NOT\_AN\_INTERRUPT)\{}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00574\ \ \ \ \ \}}
\DoxyCodeLine{00575\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00576\ \ \ \ \ \textcolor{comment}{//\ costs\ 112\ bytes\ program\ memory\ +\ 4\ bytes\ RAM}}
\DoxyCodeLine{00577\ \ \ \ \ attachInterrupt(digitalPinToInterrupt(IR\_RECEIVE\_PIN),\ \mbox{\hyperlink{group__TinyReceiver_ga3c3d6703d25dbcc0555823e23eec0e69}{IRPinChangeInterruptHandler}},\ CHANGE);}
\DoxyCodeLine{00578\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{00579\ \ \ \ \ \textcolor{comment}{//\ 2.2\ us\ more\ than\ version\ configured\ with\ macros\ and\ not\ compatible}}
\DoxyCodeLine{00580\ \ \ \ \ attachInterrupt(IR\_RECEIVE\_PIN,\ \mbox{\hyperlink{group__TinyReceiver_ga3c3d6703d25dbcc0555823e23eec0e69}{IRPinChangeInterruptHandler}},\ CHANGE);\ \textcolor{comment}{//\ no\ extra\ pin\ mapping\ here}}
\DoxyCodeLine{00581\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00582\ }
\DoxyCodeLine{00583\ \textcolor{preprocessor}{\#\ \ if\ defined(LOCAL\_DEBUG\_ATTACH\_INTERRUPT)}}
\DoxyCodeLine{00584\ \ \ \ \ Serial.println(F(\textcolor{stringliteral}{"{}Use\ attachInterrupt\ for\ pin="{}}\ STR(IR\_RECEIVE\_PIN)));}
\DoxyCodeLine{00585\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00586\ }
\DoxyCodeLine{00587\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00588\ \textcolor{preprocessor}{\#\ \ if\ defined(LOCAL\_DEBUG\_ATTACH\_INTERRUPT)}}
\DoxyCodeLine{00589\ \ \ \ \ Serial.println(F(\textcolor{stringliteral}{"{}Use\ static\ interrupt\ for\ pin="{}}\ STR(IR\_RECEIVE\_PIN)));}
\DoxyCodeLine{00590\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00591\ \textcolor{preprocessor}{\#\ \ if\ defined(USE\_INT0)}}
\DoxyCodeLine{00592\ \ \ \ \ \textcolor{comment}{//\ interrupt\ on\ any\ logical\ change}}
\DoxyCodeLine{00593\ \ \ \ \ EICRA\ |=\ \_BV(ISC00);}
\DoxyCodeLine{00594\ \ \ \ \ \textcolor{comment}{//\ clear\ interrupt\ bit}}
\DoxyCodeLine{00595\ \ \ \ \ EIFR\ |=\ 1\ <<\ INTF0;}
\DoxyCodeLine{00596\ \ \ \ \ \textcolor{comment}{//\ enable\ interrupt\ on\ next\ change}}
\DoxyCodeLine{00597\ \ \ \ \ EIMSK\ |=\ 1\ <<\ INT0;}
\DoxyCodeLine{00598\ }
\DoxyCodeLine{00599\ \textcolor{preprocessor}{\#\ \ elif\ defined(USE\_INT1)}}
\DoxyCodeLine{00600\ \ \ \ \ EICRA\ |=\ \_BV(ISC10);}
\DoxyCodeLine{00601\ \textcolor{comment}{//\ clear\ interrupt\ bit}}
\DoxyCodeLine{00602\ \ \ \ \ EIFR\ |=\ 1\ <<\ INTF1;}
\DoxyCodeLine{00603\ \textcolor{comment}{//\ enable\ interrupt\ on\ next\ change}}
\DoxyCodeLine{00604\ \ \ \ \ EIMSK\ |=\ 1\ <<\ INT1;}
\DoxyCodeLine{00605\ }
\DoxyCodeLine{00606\ \textcolor{preprocessor}{\#\ \ elif\ defined(USE\_PCIE)\ }\textcolor{comment}{//\ For\ ATtiny85\ etc.}}
\DoxyCodeLine{00607\ \ \ \ \ \textcolor{comment}{//\ use\ PinChangeInterrupt\ no\ INT0\ for\ pin\ PB2}}
\DoxyCodeLine{00608\ \ \ \ \ PCMSK\ =\ \_BV(IR\_RECEIVE\_PIN);}
\DoxyCodeLine{00609\ \ \ \ \ \textcolor{comment}{//\ clear\ interrupt\ bit}}
\DoxyCodeLine{00610\ \ \ \ \ GIFR\ |=\ 1\ <<\ PCIF;}
\DoxyCodeLine{00611\ \ \ \ \ \textcolor{comment}{//\ enable\ interrupt\ on\ next\ change}}
\DoxyCodeLine{00612\ \ \ \ \ GIMSK\ |=\ 1\ <<\ PCIE;}
\DoxyCodeLine{00613\ }
\DoxyCodeLine{00614\ \textcolor{preprocessor}{\#\ \ elif\ defined(USE\_PCINT0)}}
\DoxyCodeLine{00615\ \ \ \ \ PCICR\ |=\ \_BV(PCIE0);}
\DoxyCodeLine{00616\ \ \ \ \ PCMSK0\ =\ digitalPinToBitMask(IR\_RECEIVE\_PIN);}
\DoxyCodeLine{00617\ \textcolor{preprocessor}{\#\ \ elif\ defined(USE\_PCINT1)}}
\DoxyCodeLine{00618\ \ \ \ \ PCICR\ |=\ \_BV(PCIE1);}
\DoxyCodeLine{00619\ \ \ \ \ PCMSK1\ =\ digitalPinToBitMask(IR\_RECEIVE\_PIN);}
\DoxyCodeLine{00620\ \textcolor{preprocessor}{\#\ \ elif\ defined(USE\_PCINT2)}}
\DoxyCodeLine{00621\ \ \ \ \ PCICR\ |=\ \_BV(PCIE2);}
\DoxyCodeLine{00622\ \ \ \ \ PCMSK2\ =\ digitalPinToBitMask(IR\_RECEIVE\_PIN);}
\DoxyCodeLine{00623\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{00624\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00625\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00626\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ defined(USE\_ATTACH\_INTERRUPT)}}
\DoxyCodeLine{00627\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00628\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_gaa968353e3a3d31ca950fe4dd5be38b71}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!handleTinyReceivedIRData@{handleTinyReceivedIRData}}
\index{handleTinyReceivedIRData@{handleTinyReceivedIRData}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{handleTinyReceivedIRData()}{handleTinyReceivedIRData()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_gaa968353e3a3d31ca950fe4dd5be38b71} 
void handle\+Tiny\+Received\+IRData (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [extern]}}

Declaration of the callback function provided by the user application. It is called every time a complete IR command or repeat was received. \Hypertarget{group__TinyReceiver_gaafb51bc656ba199129d261afa3f950c2}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!initPCIInterruptForTinyReceiver@{initPCIInterruptForTinyReceiver}}
\index{initPCIInterruptForTinyReceiver@{initPCIInterruptForTinyReceiver}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{initPCIInterruptForTinyReceiver()}{initPCIInterruptForTinyReceiver()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_gaafb51bc656ba199129d261afa3f950c2} 
bool init\+PCIInterrupt\+For\+Tiny\+Receiver (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Sets IR\+\_\+\+RECEIVE\+\_\+\+PIN mode to INPUT, and if IR\+\_\+\+FEEDBACK\+\_\+\+LED\+\_\+\+PIN is defined, sets feedback LED output mode. Then call \doxylink{group__TinyReceiver_gacc1eec5de7563e88aa73d16aa9e60a10}{enable\+PCIInterrupt\+For\+Tiny\+Receiver()} 
\begin{DoxyCode}{0}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00455\ \ \ \ \ pinModeFast(IR\_RECEIVE\_PIN,\ INPUT);}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \textcolor{preprocessor}{\#if\ !defined(NO\_LED\_FEEDBACK\_CODE)\ \&\&\ defined(IR\_FEEDBACK\_LED\_PIN)}}
\DoxyCodeLine{00458\ \ \ \ \ pinModeFast(IR\_FEEDBACK\_LED\_PIN,\ OUTPUT);}
\DoxyCodeLine{00459\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00460\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{group__TinyReceiver_gacc1eec5de7563e88aa73d16aa9e60a10}{enablePCIInterruptForTinyReceiver}}();}
\DoxyCodeLine{00461\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_ga3c3d6703d25dbcc0555823e23eec0e69}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!IRPinChangeInterruptHandler@{IRPinChangeInterruptHandler}}
\index{IRPinChangeInterruptHandler@{IRPinChangeInterruptHandler}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{IRPinChangeInterruptHandler()}{IRPinChangeInterruptHandler()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga3c3d6703d25dbcc0555823e23eec0e69} 
void IRPin\+Change\+Interrupt\+Handler (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}

The ISR (Interrupt Service Routine) of Tiny\+IRRreceiver. It handles the NEC protocol decoding and calls the user callback function on complete. 5 us + 3 us for push + pop for a 16MHz ATmega 
\begin{DoxyCode}{0}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00166\ \textcolor{preprocessor}{\#if\ defined(\_IR\_MEASURE\_TIMING)\ \&\&\ defined(\_IR\_TIMING\_TEST\_PIN)}}
\DoxyCodeLine{00167\ \ \ \ \ digitalWriteFast(\_IR\_TIMING\_TEST\_PIN,\ HIGH);\ \textcolor{comment}{//\ 2\ clock\ cycles}}
\DoxyCodeLine{00168\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00170\ \textcolor{comment}{\ \ \ \ \ *\ Save\ IR\ input\ level}}
\DoxyCodeLine{00171\ \textcolor{comment}{\ \ \ \ \ *\ Negative\ logic,\ true\ /\ HIGH\ means\ inactive\ /\ IR\ space,\ LOW\ /\ false\ means\ IR\ mark.}}
\DoxyCodeLine{00172\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00173\ \ \ \ \ uint\_fast8\_t\ tIRLevel\ =\ digitalReadFast(IR\_RECEIVE\_PIN);}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \textcolor{preprocessor}{\#if\ !defined(NO\_LED\_FEEDBACK\_CODE)\ \&\&\ defined(IR\_FEEDBACK\_LED\_PIN)}}
\DoxyCodeLine{00176\ \ \ \ \ digitalWriteFast(IR\_FEEDBACK\_LED\_PIN,\ !tIRLevel);}
\DoxyCodeLine{00177\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00180\ \textcolor{comment}{\ \ \ \ \ *\ 1.\ compute\ microseconds\ after\ last\ change}}
\DoxyCodeLine{00181\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{comment}{//\ Repeats\ can\ be\ sent\ after\ a\ pause,\ which\ is\ longer\ than\ 64000\ microseconds,\ so\ we\ need\ a\ 32\ bit\ value\ for\ check\ of\ repeats}}
\DoxyCodeLine{00183\ \ \ \ \ uint32\_t\ tCurrentMicros\ =\ micros();}
\DoxyCodeLine{00184\ \ \ \ \ uint32\_t\ tMicrosOfMarkOrSpace32\ =\ tCurrentMicros\ -\/\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_ad7b6f95e5a153384b352d09bb84a2444}{LastChangeMicros}};}
\DoxyCodeLine{00185\ \ \ \ \ uint16\_t\ tMicrosOfMarkOrSpace\ =\ tMicrosOfMarkOrSpace32;}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_ad7b6f95e5a153384b352d09bb84a2444}{LastChangeMicros}}\ =\ tCurrentMicros;}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ \ \ uint8\_t\ tState\ =\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a04a9f384aca34cc05024a4a2bfe0c646}{IRReceiverState}};}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \textcolor{preprocessor}{\#if\ defined(LOCAL\_TRACE\_STATE\_MACHINE)}}
\DoxyCodeLine{00192\ \ \ \ \ Serial.print(tState);}
\DoxyCodeLine{00193\ \ \ \ \ Serial.print(F(\textcolor{stringliteral}{"{}\ D="{}}));}
\DoxyCodeLine{00194\ \ \ \ \ Serial.print(tMicrosOfMarkOrSpace);}
\DoxyCodeLine{00195\ \textcolor{comment}{//\ \ \ \ Serial.print(F("{}\ I="{}));}}
\DoxyCodeLine{00196\ \textcolor{comment}{//\ \ \ \ Serial.print(tIRLevel);}}
\DoxyCodeLine{00197\ \ \ \ \ Serial.print(\textcolor{charliteral}{'|'});}
\DoxyCodeLine{00198\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keywordflow}{if}\ (tIRLevel\ ==\ LOW)\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00202\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ We\ have\ a\ mark\ here}}
\DoxyCodeLine{00203\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tMicrosOfMarkOrSpace\ >\ 2\ *\ TINY\_RECEIVER\_HEADER\_MARK)\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ timeout\ -\/>\ must\ reset\ state\ machine}}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_START\_MARK;}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tState\ ==\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_START\_MARK)\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ are\ at\ the\ beginning\ of\ the\ header\ mark,\ check\ timing\ at\ the\ next\ transition}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_START\_SPACE;}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_aeb3f0fed7dd127f81565f62281a7ae41}{Flags}}\ =\ IRDATA\_FLAGS\_EMPTY;\ \textcolor{comment}{//\ If\ we\ do\ it\ here,\ it\ saves\ 4\ bytes}}
\DoxyCodeLine{00212\ \textcolor{preprocessor}{\#if\ defined(LOCAL\_TRACE)}}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ sMicrosOfGap\ =\ tMicrosOfMarkOrSpace32;}
\DoxyCodeLine{00214\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00215\ \textcolor{preprocessor}{\#if\ defined(ENABLE\_NEC2\_REPEATS)}}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ for\ repeat,\ where\ full\ frame\ is\ sent\ again\ after\ TINY\_RECEIVER\_REPEAT\_PERIOD\ ms}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Not\ required\ for\ NEC,\ where\ repeats\ are\ detected\ by\ a\ special\ header\ space\ duration}}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Must\ use\ 32\ bit\ arithmetic\ here!}}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tMicrosOfMarkOrSpace32\ <\ TINY\_RECEIVER\_MAXIMUM\_REPEAT\_DISTANCE)\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_aeb3f0fed7dd127f81565f62281a7ae41}{Flags}}\ =\ \mbox{\hyperlink{IRProtocol_8h_aaa9952cd64b58083c28873484c494abf}{IRDATA\_FLAGS\_IS\_REPEAT}};}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00222\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (tState\ ==\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_FIRST\_DATA\_MARK)\ \{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tMicrosOfMarkOrSpace\ >=\ lowerValue25Percent(TINY\_RECEIVER\_HEADER\_SPACE)}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ tMicrosOfMarkOrSpace\ <=\ upperValue25Percent(TINY\_RECEIVER\_HEADER\_SPACE))\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00229\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ We\ have\ a\ valid\ data\ header\ space\ here\ -\/>\ initialize\ data}}
\DoxyCodeLine{00230\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a880e6b24e5109e97c390fd936dc252ee}{IRRawDataBitCounter}}\ =\ 0;}
\DoxyCodeLine{00232\ \textcolor{preprocessor}{\#if\ (TINY\_RECEIVER\_BITS\ >\ 16)}}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.ULong\ =\ 0;}
\DoxyCodeLine{00234\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UWord\ =\ 0;}
\DoxyCodeLine{00236\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a5eafe8535ef995c504408dca09446f45}{IRRawDataMask}}\ =\ 1;}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_DATA\_SPACE;}
\DoxyCodeLine{00239\ \textcolor{preprocessor}{\#if\ !defined(ENABLE\_NEC2\_REPEATS)}}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ for\ NEC\ repeat\ header}}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (tMicrosOfMarkOrSpace\ >=\ lowerValue25Percent(NEC\_REPEAT\_HEADER\_SPACE)}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ tMicrosOfMarkOrSpace\ <=\ upperValue25Percent(NEC\_REPEAT\_HEADER\_SPACE)}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a880e6b24e5109e97c390fd936dc252ee}{IRRawDataBitCounter}}\ >=\ TINY\_RECEIVER\_BITS)\ \{}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00245\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ We\ have\ a\ repeat\ header\ here\ and\ no\ broken\ receive\ before\ -\/>\ set\ repeat\ flag}}
\DoxyCodeLine{00246\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_aeb3f0fed7dd127f81565f62281a7ae41}{Flags}}\ =\ \mbox{\hyperlink{IRProtocol_8h_aaa9952cd64b58083c28873484c494abf}{IRDATA\_FLAGS\_IS\_REPEAT}};}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_DATA\_SPACE;}
\DoxyCodeLine{00249\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ parts\ are\ optimized\ by\ the\ compiler\ into\ jumps\ to\ one\ code\ :-\/)}}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wrong\ length\ -\/>\ reset\ state}}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_START\_MARK;}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (tState\ ==\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_DATA\_MARK)\ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ data\ space\ length}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tMicrosOfMarkOrSpace\ >=\ lowerValue50Percent(TINY\_RECEIVER\_ZERO\_SPACE)}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ tMicrosOfMarkOrSpace\ <=\ upperValue50Percent(TINY\_RECEIVER\_ONE\_SPACE))\ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ have\ a\ valid\ bit\ here}}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_DATA\_SPACE;}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tMicrosOfMarkOrSpace\ >=\ 2\ *\ TINY\_RECEIVER\_UNIT)\ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ received\ a\ 1}}
\DoxyCodeLine{00265\ \textcolor{preprocessor}{\#if\ (TINY\_RECEIVER\_BITS\ >\ 16)}}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.ULong\ |=\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a5eafe8535ef995c504408dca09446f45}{IRRawDataMask}};}
\DoxyCodeLine{00267\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UWord\ |=\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a5eafe8535ef995c504408dca09446f45}{IRRawDataMask}};}
\DoxyCodeLine{00269\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ received\ a\ 0\ -\/\ empty\ code\ for\ documentation}}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ prepare\ for\ next\ bit}}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a5eafe8535ef995c504408dca09446f45}{IRRawDataMask}}\ =\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a5eafe8535ef995c504408dca09446f45}{IRRawDataMask}}\ <<\ 1;}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a880e6b24e5109e97c390fd936dc252ee}{IRRawDataBitCounter}}++;}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wrong\ length\ -\/>\ reset\ state}}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_START\_MARK;}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ error\ wrong\ state\ for\ the\ received\ level,\ e.g.\ if\ we\ missed\ one\ change\ interrupt\ -\/>\ reset\ state}}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_START\_MARK;}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00284\ \ \ \ \ \}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00288\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ We\ have\ a\ space\ here}}
\DoxyCodeLine{00289\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tState\ ==\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_START\_SPACE)\ \{}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00292\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Check\ length\ of\ header\ mark\ here}}
\DoxyCodeLine{00293\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tMicrosOfMarkOrSpace\ >=\ lowerValue25Percent(TINY\_RECEIVER\_HEADER\_MARK)}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ tMicrosOfMarkOrSpace\ <=\ upperValue25Percent(TINY\_RECEIVER\_HEADER\_MARK))\ \{}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_FIRST\_DATA\_MARK;}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wrong\ length\ of\ header\ mark\ -\/>\ reset\ state}}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_START\_MARK;}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (tState\ ==\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_DATA\_SPACE)\ \{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ data\ mark\ length}}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tMicrosOfMarkOrSpace\ >=\ lowerValue50Percent(TINY\_RECEIVER\_BIT\_MARK)}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ tMicrosOfMarkOrSpace\ <=\ upperValue50Percent(TINY\_RECEIVER\_BIT\_MARK))\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00308\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ We\ have\ a\ valid\ mark\ here,\ check\ for\ transmission\ complete,\ i.e.\ the\ mark\ of\ the\ stop\ bit}}
\DoxyCodeLine{00309\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a880e6b24e5109e97c390fd936dc252ee}{IRRawDataBitCounter}}\ >=\ TINY\_RECEIVER\_BITS}
\DoxyCodeLine{00311\ \#\textcolor{keywordflow}{if}\ !defined(ENABLE\_NEC2\_REPEATS)}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ (TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_aeb3f0fed7dd127f81565f62281a7ae41}{Flags}}\ \&\ \mbox{\hyperlink{IRProtocol_8h_aaa9952cd64b58083c28873484c494abf}{IRDATA\_FLAGS\_IS\_REPEAT}})\ \textcolor{comment}{//\ Do\ not\ check\ for\ full\ length\ received,\ if\ we\ have\ a\ short\ repeat\ frame}}
\DoxyCodeLine{00313\ \#endif}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )\ \{}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00316\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Code\ complete\ -\/>\ optionally\ check\ parity}}
\DoxyCodeLine{00317\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reset\ state\ for\ new\ start}}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_START\_MARK;}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \textcolor{preprocessor}{\#if\ !defined(DISABLE\_PARITY\_CHECKS)\ \&\&\ (TINY\_RECEIVER\_ADDRESS\_BITS\ ==\ 16)\ \&\&\ TINY\_RECEIVER\_ADDRESS\_HAS\_8\_BIT\_PARITY}}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00323\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Check\ address\ parity}}
\DoxyCodeLine{00324\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Address\ is\ sent\ first\ and\ contained\ in\ the\ lower\ word}}
\DoxyCodeLine{00325\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[0]\ !=\ (uint8\_t)\ (\string~TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[1]))\ \{}
\DoxyCodeLine{00327\ \textcolor{preprocessor}{\#if\ defined(ENABLE\_NEC2\_REPEATS)}}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_aeb3f0fed7dd127f81565f62281a7ae41}{Flags}}\ |=\ \mbox{\hyperlink{IRProtocol_8h_a1a60f95f0885b1865dc5514ddd80e093}{IRDATA\_FLAGS\_PARITY\_FAILED}};\ \textcolor{comment}{//\ here\ we\ can\ have\ the\ repeat\ flag\ already\ set}}
\DoxyCodeLine{00329\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_aeb3f0fed7dd127f81565f62281a7ae41}{Flags}}\ =\ \mbox{\hyperlink{IRProtocol_8h_a1a60f95f0885b1865dc5514ddd80e093}{IRDATA\_FLAGS\_PARITY\_FAILED}};\ \textcolor{comment}{//\ here\ we\ do\ not\ check\ anything,\ if\ we\ have\ a\ repeat}}
\DoxyCodeLine{00331\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00333\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00334\ \textcolor{preprocessor}{\#if\ !defined(DISABLE\_PARITY\_CHECKS)\ \&\&\ (TINY\_RECEIVER\_COMMAND\_BITS\ ==\ 16)\ \&\&\ TINY\_RECEIVER\_COMMAND\_HAS\_8\_BIT\_PARITY}}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00336\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Check\ command\ parity}}
\DoxyCodeLine{00337\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00338\ \textcolor{preprocessor}{\#if\ (TINY\_RECEIVER\_ADDRESS\_BITS\ >\ 0)}}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[2]\ !=\ (uint8\_t)\ (\string~TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[3]))\ \{}
\DoxyCodeLine{00340\ \textcolor{preprocessor}{\#if\ defined(ENABLE\_NEC2\_REPEATS)}}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_aeb3f0fed7dd127f81565f62281a7ae41}{Flags}}\ |=\ \mbox{\hyperlink{IRProtocol_8h_a1a60f95f0885b1865dc5514ddd80e093}{IRDATA\_FLAGS\_PARITY\_FAILED}};}
\DoxyCodeLine{00342\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_aeb3f0fed7dd127f81565f62281a7ae41}{Flags}}\ =\ \mbox{\hyperlink{IRProtocol_8h_a1a60f95f0885b1865dc5514ddd80e093}{IRDATA\_FLAGS\_PARITY\_FAILED}};}
\DoxyCodeLine{00344\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00345\ \textcolor{preprocessor}{\#\ \ if\ defined(LOCAL\_DEBUG)}}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.print(F(\textcolor{stringliteral}{"{}Parity\ check\ for\ command\ failed.\ Command="{}}));}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.print(TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[2],\ HEX);}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.print(F(\textcolor{stringliteral}{"{}\ parity="{}}));}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.println(TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[3],\ HEX);}
\DoxyCodeLine{00350\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00351\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ No\ address,\ so\ command\ and\ parity\ are\ in\ the\ lowest\ bytes}}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[0]\ !=\ (uint8\_t)\ (\string~TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[1]))\ \{}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_aeb3f0fed7dd127f81565f62281a7ae41}{Flags}}\ |=\ \mbox{\hyperlink{IRProtocol_8h_a1a60f95f0885b1865dc5514ddd80e093}{IRDATA\_FLAGS\_PARITY\_FAILED}};}
\DoxyCodeLine{00355\ \textcolor{preprocessor}{\#\ \ if\ defined(LOCAL\_DEBUG)}}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.print(F(\textcolor{stringliteral}{"{}Parity\ check\ for\ command\ failed.\ Command="{}}));}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.print(TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[0],\ HEX);}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.print(F(\textcolor{stringliteral}{"{}\ parity="{}}));}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.println(TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[1],\ HEX);}
\DoxyCodeLine{00360\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00361\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00363\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00365\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ Call\ user\ provided\ callback\ here}}
\DoxyCodeLine{00366\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ The\ parameter\ size\ is\ dependent\ of\ the\ code\ variant\ used\ in\ order\ to\ save\ program\ memory.}}
\DoxyCodeLine{00367\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\ We\ have\ 6\ cases:\ 0,\ 8\ bit\ or\ 16\ bit\ address,\ each\ with\ 8\ or\ 16\ bit\ command}}
\DoxyCodeLine{00368\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00369\ \textcolor{preprocessor}{\#if\ !defined(ARDUINO\_ARCH\_MBED)\ \&\&\ !defined(ESP32)\ }\textcolor{comment}{//\ no\ Serial\ etc.\ in\ callback\ for\ ESP\ -\/>\ no\ interrupt\ required,\ WDT\ is\ running!}}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ interrupts();\ \textcolor{comment}{//\ enable\ interrupts,\ so\ delay()\ etc.\ works\ in\ callback}}
\DoxyCodeLine{00371\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverData.\mbox{\hyperlink{structTinyIRReceiverCallbackDataStruct_aff079c5dbb9e3bb1aa10907f8f89bebe}{justWritten}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverData.Flags\ =\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_aeb3f0fed7dd127f81565f62281a7ae41}{Flags}};}
\DoxyCodeLine{00374\ \textcolor{preprocessor}{\#if\ (TINY\_RECEIVER\_ADDRESS\_BITS\ >\ 0)}}
\DoxyCodeLine{00375\ \textcolor{preprocessor}{\#\ \ if\ TINY\_RECEIVER\_ADDRESS\_HAS\_8\_BIT\_PARITY}}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here\ we\ have\ 8\ bit\ address}}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverData.Address\ =\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[0];}
\DoxyCodeLine{00378\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here\ we\ have\ 16\ bit\ address}}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverData.Address\ =\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UWord.LowWord;}
\DoxyCodeLine{00381\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00382\ \textcolor{preprocessor}{\#\ \ if\ TINY\_RECEIVER\_COMMAND\_HAS\_8\_BIT\_PARITY}}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here\ we\ have\ 8\ bit\ command}}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverData.Command\ =\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[2];}
\DoxyCodeLine{00385\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here\ we\ have\ 16\ bit\ command}}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverData.Command\ =\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UWord.HighWord;}
\DoxyCodeLine{00388\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00390\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here\ we\ have\ NO\ address}}
\DoxyCodeLine{00392\ \textcolor{preprocessor}{\#\ \ if\ TINY\_RECEIVER\_COMMAND\_HAS\_8\_BIT\_PARITY}}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here\ we\ have\ 8\ bit\ command}}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverData.Command\ =\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UBytes[0];}
\DoxyCodeLine{00395\ \textcolor{preprocessor}{\#\ \ else}}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here\ we\ have\ 16\ bit\ command}}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TinyIRReceiverData.Command\ =\ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a8bae85970767a7c24b11848610a20e2c}{IRRawData}}.UWord;}
\DoxyCodeLine{00398\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00399\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00400\ \textcolor{preprocessor}{\#if\ defined(USE\_CALLBACK\_FOR\_TINY\_RECEIVER)}}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ handleReceivedTinyIRData();}
\DoxyCodeLine{00402\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ not\ finished\ yet}}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_DATA\_MARK;}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wrong\ length\ -\/>\ reset\ state}}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_START\_MARK;}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ error\ wrong\ state\ for\ the\ received\ level,\ e.g.\ if\ we\ missed\ one\ change\ interrupt\ -\/>\ reset\ state}}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \ \ \ \ tState\ =\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_START\_MARK;}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00416\ \ \ \ \ \}}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \ \ \ \ TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a04a9f384aca34cc05024a4a2bfe0c646}{IRReceiverState}}\ =\ tState;}
\DoxyCodeLine{00419\ \textcolor{preprocessor}{\#ifdef\ \_IR\_MEASURE\_TIMING}}
\DoxyCodeLine{00420\ \ \ \ \ digitalWriteFast(\_IR\_TIMING\_TEST\_PIN,\ LOW);\ \textcolor{comment}{//\ 2\ clock\ cycles}}
\DoxyCodeLine{00421\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00422\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_ga2553571086097dd6e7ba319a6da2c743}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!isIRReceiverAttachedForTinyReceiver@{isIRReceiverAttachedForTinyReceiver}}
\index{isIRReceiverAttachedForTinyReceiver@{isIRReceiverAttachedForTinyReceiver}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{isIRReceiverAttachedForTinyReceiver()}{isIRReceiverAttachedForTinyReceiver()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga2553571086097dd6e7ba319a6da2c743} 
bool is\+IRReceiver\+Attached\+For\+Tiny\+Receiver (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00444\ \ \ \ \ pinModeFast(IR\_RECEIVE\_PIN,\ OUTPUT);}
\DoxyCodeLine{00445\ \ \ \ \ digitalWriteFast(IR\_RECEIVE\_PIN,\ LOW);\ \textcolor{comment}{//\ discharge\ pin\ capacity}}
\DoxyCodeLine{00446\ \ \ \ \ pinModeFast(IR\_RECEIVE\_PIN,\ INPUT);}
\DoxyCodeLine{00447\ \ \ \ \ \textcolor{keywordflow}{return}\ digitalRead(IR\_RECEIVE\_PIN);\ \textcolor{comment}{//\ use\ slow\ digitalRead\ here,\ since\ the\ pin\ capacity\ is\ not\ fully\ charged\ again\ if\ we\ use\ digitalReadFast.}}
\DoxyCodeLine{00448\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_gab65e33fe496d3bee4af897e5d8bd9420}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!isTinyReceiverIdle@{isTinyReceiverIdle}}
\index{isTinyReceiverIdle@{isTinyReceiverIdle}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{isTinyReceiverIdle()}{isTinyReceiverIdle()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_gab65e33fe496d3bee4af897e5d8bd9420} 
bool is\+Tiny\+Receiver\+Idle (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00425\ \ \ \ \ \textcolor{keywordflow}{return}\ (TinyIRReceiverControl.\mbox{\hyperlink{structTinyIRReceiverStruct_a04a9f384aca34cc05024a4a2bfe0c646}{IRReceiverState}}\ ==\ IR\_RECEIVER\_STATE\_WAITING\_FOR\_START\_MARK);}
\DoxyCodeLine{00426\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_ga27649645d9280dfaee8095ce2dcf8f07}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!printTinyReceiverResultMinimal@{printTinyReceiverResultMinimal}}
\index{printTinyReceiverResultMinimal@{printTinyReceiverResultMinimal}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{printTinyReceiverResultMinimal()}{printTinyReceiverResultMinimal()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga27649645d9280dfaee8095ce2dcf8f07} 
void print\+Tiny\+Receiver\+Result\+Minimal (\begin{DoxyParamCaption}\item[{Print \texorpdfstring{$\ast$}{*}}]{a\+Serial}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00464\ \textcolor{comment}{//\ Print\ only\ very\ short\ output,\ since\ we\ are\ in\ an\ interrupt\ context\ and\ do\ not\ want\ to\ miss\ the\ next\ interrupts\ of\ the\ repeats\ coming\ soon}}
\DoxyCodeLine{00465\ \ \ \ \ \textcolor{comment}{//\ Print\ only\ very\ short\ output,\ since\ we\ are\ in\ an\ interrupt\ context\ and\ do\ not\ want\ to\ miss\ the\ next\ interrupts\ of\ the\ repeats\ coming\ soon}}
\DoxyCodeLine{00466\ \textcolor{preprocessor}{\#if\ defined(USE\_FAST\_PROTOCOL)}}
\DoxyCodeLine{00467\ \ \ \ \ aSerial-\/>print(F(\textcolor{stringliteral}{"{}C=0x"{}}));}
\DoxyCodeLine{00468\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00469\ \ \ \ \ aSerial-\/>print(F(\textcolor{stringliteral}{"{}A=0x"{}}));}
\DoxyCodeLine{00470\ \ \ \ \ aSerial-\/>print(TinyIRReceiverData.Address,\ HEX);}
\DoxyCodeLine{00471\ \ \ \ \ aSerial-\/>print(F(\textcolor{stringliteral}{"{}\ C=0x"{}}));}
\DoxyCodeLine{00472\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00473\ \ \ \ \ aSerial-\/>print(TinyIRReceiverData.Command,\ HEX);}
\DoxyCodeLine{00474\ \ \ \ \ \textcolor{keywordflow}{if}\ (TinyIRReceiverData.Flags\ ==\ \mbox{\hyperlink{IRProtocol_8h_aaa9952cd64b58083c28873484c494abf}{IRDATA\_FLAGS\_IS\_REPEAT}})\ \{}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ aSerial-\/>print(F(\textcolor{stringliteral}{"{}\ R"{}}));}
\DoxyCodeLine{00476\ \ \ \ \ \}}
\DoxyCodeLine{00477\ \textcolor{preprocessor}{\#if\ !defined(DISABLE\_PARITY\_CHECKS)}}
\DoxyCodeLine{00478\ \ \ \ \ \textcolor{keywordflow}{if}\ (TinyIRReceiverData.Flags\ ==\ \mbox{\hyperlink{IRProtocol_8h_a1a60f95f0885b1865dc5514ddd80e093}{IRDATA\_FLAGS\_PARITY\_FAILED}})\ \{}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ aSerial-\/>print(F(\textcolor{stringliteral}{"{}\ P"{}}));}
\DoxyCodeLine{00480\ \ \ \ \ \}}
\DoxyCodeLine{00481\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00482\ \ \ \ \ aSerial-\/>println();}
\DoxyCodeLine{00483\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_ga2f9e7eb2572eabb1fb55a5e112a7afdb}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!sendExtendedNEC@{sendExtendedNEC}}
\index{sendExtendedNEC@{sendExtendedNEC}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendExtendedNEC()}{sendExtendedNEC()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga2f9e7eb2572eabb1fb55a5e112a7afdb} 
void send\+Extended\+NEC (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{uint16\+\_\+t}]{a\+Address}{, }\item[{uint16\+\_\+t}]{a\+Command}{, }\item[{uint\+\_\+fast8\+\_\+t}]{a\+Number\+Of\+Repeats}{ = {\ttfamily 0}, }\item[{bool}]{a\+Send\+NEC2\+Repeats}{ = {\ttfamily false}}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00235\ \ \ \ \ pinModeFast(aSendPin,\ OUTPUT);}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ uint\_fast8\_t\ tNumberOfCommands\ =\ aNumberOfRepeats\ +\ 1;}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordflow}{while}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ tStartOfFrameMillis\ =\ millis();}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_HEADER\_MARK);}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((!aSendNEC2Repeats)\ \&\&\ (tNumberOfCommands\ <\ aNumberOfRepeats\ +\ 1))\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ the\ NEC\ special\ repeat}}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_REPEAT\_HEADER\_SPACE);\ \textcolor{comment}{//\ -\/\ 2250}}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ header}}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_HEADER\_SPACE);}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{unionLongUnion}{LongUnion}}\ tData;}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ tData.UWord.LowWord\ =\ aAddress;}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (aCommand\ >\ 0xFF)\ \{}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UWord.HighWord\ =\ aCommand;}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UByte.MidHighByte\ =\ aCommand;}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UByte.HighByte\ =\ \string~aCommand;\ \textcolor{comment}{//\ LSB\ first}}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Send\ data}}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint\_fast8\_t\ i\ =\ 0;\ i\ <\ NEC\_BITS;\ ++i)\ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_BIT\_MARK);\ \textcolor{comment}{//\ constant\ mark\ length}}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tData.ULong\ \&\ 1)\ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_ONE\_SPACE);}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_ZERO\_SPACE);}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.ULong\ >>=\ 1;\ \textcolor{comment}{//\ shift\ command\ for\ next\ bit}}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ stop\ bit}}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_BIT\_MARK);}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ tNumberOfCommands-\/-\/;}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ skip\ last\ delay!}}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00274\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Check\ and\ fallback\ for\ wrong\ RepeatPeriodMillis\ parameter.\ I.e\ the\ repeat\ period\ must\ be\ greater\ than\ each\ frame\ duration.}}
\DoxyCodeLine{00275\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tFrameDurationMillis\ =\ millis()\ -\/\ tStartOfFrameMillis;}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (NEC\_REPEAT\_PERIOD\ /\ 1000\ >\ tFrameDurationMillis)\ \{}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delay(NEC\_REPEAT\_PERIOD\ /\ 1000\ -\/\ tFrameDurationMillis);}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00281\ \ \ \ \ \}}
\DoxyCodeLine{00282\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_ga5d40a2ebca50382f9ddc8210cd82ebcd}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!sendFAST@{sendFAST}}
\index{sendFAST@{sendFAST}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendFAST()}{sendFAST()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga5d40a2ebca50382f9ddc8210cd82ebcd} 
void send\+FAST (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{uint16\+\_\+t}]{a\+Command}{, }\item[{uint\+\_\+fast8\+\_\+t}]{a\+Number\+Of\+Repeats}{ = {\ttfamily 0}}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00295\ \ \ \ \ pinModeFast(aSendPin,\ OUTPUT);}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ uint\_fast8\_t\ tNumberOfCommands\ =\ aNumberOfRepeats\ +\ 1;}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordflow}{while}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ tStartOfFrameMillis\ =\ millis();}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ header}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ FAST\_HEADER\_MARK);}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ delayMicroseconds(FAST\_HEADER\_SPACE);}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ uint16\_t\ tData;}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00306\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ The\ compiler\ is\ intelligent\ and\ removes\ the\ code\ for\ "{}(aCommand\ >\ 0xFF)"{}\ if\ we\ are\ called\ with\ an\ uint8\_t\ command\ :-\/).}}
\DoxyCodeLine{00307\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ Using\ an\ uint16\_t\ command\ requires\ additional\ 56\ bytes\ program\ memory.}}
\DoxyCodeLine{00308\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (aCommand\ >\ 0xFF)\ \{}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ tData\ =\ aCommand;}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ tData\ =\ aCommand\ |\ (((uint8\_t)\ (\string~aCommand))\ <<\ 8);\ \textcolor{comment}{//\ LSB\ first}}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Send\ data}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint\_fast8\_t\ i\ =\ 0;\ i\ <\ FAST\_BITS;\ ++i)\ \{}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ FAST\_BIT\_MARK);\ \textcolor{comment}{//\ constant\ mark\ length}}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tData\ \&\ 1)\ \{}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(FAST\_ONE\_SPACE);}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(FAST\_ZERO\_SPACE);}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ tData\ >>=\ 1;\ \textcolor{comment}{//\ shift\ command\ for\ next\ bit}}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ stop\ bit}}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ FAST\_BIT\_MARK);}
\DoxyCodeLine{00327\ }
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ tNumberOfCommands-\/-\/;}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ skip\ last\ delay!}}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00332\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Check\ and\ fallback\ for\ wrong\ RepeatPeriodMillis\ parameter.\ I.e\ the\ repeat\ period\ must\ be\ greater\ than\ each\ frame\ duration.}}
\DoxyCodeLine{00333\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tFrameDurationMillis\ =\ millis()\ -\/\ tStartOfFrameMillis;}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (FAST\_REPEAT\_PERIOD\ /\ 1000\ >\ tFrameDurationMillis)\ \{}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delay(FAST\_REPEAT\_PERIOD\ /\ 1000\ -\/\ tFrameDurationMillis);}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00339\ \ \ \ \ \}}
\DoxyCodeLine{00340\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_ga21e45ae5abbd50dcf77693c87c01cc71}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!sendFast8BitAndParity@{sendFast8BitAndParity}}
\index{sendFast8BitAndParity@{sendFast8BitAndParity}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendFast8BitAndParity()}{sendFast8BitAndParity()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga21e45ae5abbd50dcf77693c87c01cc71} 
void send\+Fast8\+Bit\+And\+Parity (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{uint8\+\_\+t}]{a\+Command}{, }\item[{uint\+\_\+fast8\+\_\+t}]{a\+Number\+Of\+Repeats}{ = {\ttfamily 0}}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00288\ \ \ \ \ sendFAST(aSendPin,\ aCommand,\ aNumberOfRepeats);}
\DoxyCodeLine{00289\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_gad56f6ae51db2f76f6b48bd6eb621b55d}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!sendNEC@{sendNEC}}
\index{sendNEC@{sendNEC}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendNEC()}{sendNEC()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_gad56f6ae51db2f76f6b48bd6eb621b55d} 
void send\+NEC (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{uint16\+\_\+t}]{a\+Address}{, }\item[{uint16\+\_\+t}]{a\+Command}{, }\item[{uint\+\_\+fast8\+\_\+t}]{a\+Number\+Of\+Repeats}{ = {\ttfamily 0}, }\item[{bool}]{a\+Send\+NEC2\+Repeats}{ = {\ttfamily false}}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00169\ \ \ \ \ pinModeFast(aSendPin,\ OUTPUT);}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ uint\_fast8\_t\ tNumberOfCommands\ =\ aNumberOfRepeats\ +\ 1;}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keywordflow}{while}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ tStartOfFrameMillis\ =\ millis();}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_HEADER\_MARK);}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((!aSendNEC2Repeats)\ \&\&\ (tNumberOfCommands\ <\ aNumberOfRepeats\ +\ 1))\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ the\ NEC\ special\ repeat}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_REPEAT\_HEADER\_SPACE);\ \textcolor{comment}{//\ -\/\ 2250}}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ header}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_HEADER\_SPACE);}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{unionLongUnion}{LongUnion}}\ tData;}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00184\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ The\ compiler\ is\ intelligent\ and\ removes\ the\ code\ for\ "{}(aAddress\ >\ 0xFF)"{}\ if\ we\ are\ called\ with\ an\ uint8\_t\ address\ :-\/).}}
\DoxyCodeLine{00185\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Using\ an\ uint16\_t\ address\ requires\ additional\ 28\ bytes\ program\ memory.}}
\DoxyCodeLine{00186\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (aAddress\ >\ 0xFF)\ \{}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UWord.LowWord\ =\ aAddress;}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UByte.LowByte\ =\ aAddress;\ \textcolor{comment}{//\ LSB\ first}}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UByte.MidLowByte\ =\ \string~aAddress;}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (aCommand\ >\ 0xFF)\ \{}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UWord.HighWord\ =\ aCommand;}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UByte.MidHighByte\ =\ aCommand;}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UByte.HighByte\ =\ \string~aCommand;\ \textcolor{comment}{//\ LSB\ first}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Send\ data}}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint\_fast8\_t\ i\ =\ 0;\ i\ <\ NEC\_BITS;\ ++i)\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_BIT\_MARK);\ \textcolor{comment}{//\ constant\ mark\ length}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tData.ULong\ \&\ 1)\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_ONE\_SPACE);}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_ZERO\_SPACE);}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.ULong\ >>=\ 1;\ \textcolor{comment}{//\ shift\ command\ for\ next\ bit}}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ stop\ bit}}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_BIT\_MARK);}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ tNumberOfCommands-\/-\/;}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ skip\ last\ delay!}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00217\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Check\ and\ fallback\ for\ wrong\ RepeatPeriodMillis\ parameter.\ I.e\ the\ repeat\ period\ must\ be\ greater\ than\ each\ frame\ duration.}}
\DoxyCodeLine{00218\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tFrameDurationMillis\ =\ millis()\ -\/\ tStartOfFrameMillis;}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (NEC\_REPEAT\_PERIOD\ /\ 1000\ >\ tFrameDurationMillis)\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delay(NEC\_REPEAT\_PERIOD\ /\ 1000\ -\/\ tFrameDurationMillis);}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00224\ \ \ \ \ \}}
\DoxyCodeLine{00225\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_gad46384dcfa939b9ed9538b6c907acb1f}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!sendNECMinimal@{sendNECMinimal}}
\index{sendNECMinimal@{sendNECMinimal}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendNECMinimal()}{sendNECMinimal()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_gad46384dcfa939b9ed9538b6c907acb1f} 
void send\+NECMinimal (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{uint16\+\_\+t}]{a\+Address}{, }\item[{uint16\+\_\+t}]{a\+Command}{, }\item[{uint\+\_\+fast8\+\_\+t}]{a\+Number\+Of\+Repeats}{ = {\ttfamily 0}}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00166\ \ \ \ \ sendNEC(aSendPin,\ aAddress,\ aCommand,\ aNumberOfRepeats);\ \textcolor{comment}{//\ sendNECMinimal()\ is\ deprecated}}
\DoxyCodeLine{00167\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_ga42ba5dff1100c121334ae46c000631e2}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!sendONKYO@{sendONKYO}}
\index{sendONKYO@{sendONKYO}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendONKYO()}{sendONKYO()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_ga42ba5dff1100c121334ae46c000631e2} 
void send\+ONKYO (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{uint16\+\_\+t}]{a\+Address}{, }\item[{uint16\+\_\+t}]{a\+Command}{, }\item[{uint\+\_\+fast8\+\_\+t}]{a\+Number\+Of\+Repeats}{ = {\ttfamily 0}, }\item[{bool}]{a\+Send\+NEC2\+Repeats}{ = {\ttfamily false}}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00115\ \ \ \ \ pinModeFast(aSendPin,\ OUTPUT);}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ uint\_fast8\_t\ tNumberOfCommands\ =\ aNumberOfRepeats\ +\ 1;}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordflow}{while}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ tStartOfFrameMillis\ =\ millis();}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_HEADER\_MARK);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((!aSendNEC2Repeats)\ \&\&\ (tNumberOfCommands\ <\ aNumberOfRepeats\ +\ 1))\ \{}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ the\ NEC\ special\ repeat}}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_REPEAT\_HEADER\_SPACE);\ \textcolor{comment}{//\ -\/\ 2250}}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ header}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_HEADER\_SPACE);}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{unionLongUnion}{LongUnion}}\ tData;}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ tData.UWord.LowWord\ =\ aAddress;}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ tData.UWord.HighWord\ =\ aCommand;}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Send\ data}}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint\_fast8\_t\ i\ =\ 0;\ i\ <\ NEC\_BITS;\ ++i)\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_BIT\_MARK);\ \textcolor{comment}{//\ constant\ mark\ length}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tData.ULong\ \&\ 1)\ \{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_ONE\_SPACE);}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_ZERO\_SPACE);}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.ULong\ >>=\ 1;\ \textcolor{comment}{//\ shift\ command\ for\ next\ bit}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ stop\ bit}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_BIT\_MARK);}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ tNumberOfCommands-\/-\/;}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ skip\ last\ delay!}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00148\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Check\ and\ fallback\ for\ wrong\ RepeatPeriodMillis\ parameter.\ I.e\ the\ repeat\ period\ must\ be\ greater\ than\ each\ frame\ duration.}}
\DoxyCodeLine{00149\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tFrameDurationMillis\ =\ millis()\ -\/\ tStartOfFrameMillis;}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (NEC\_REPEAT\_PERIOD\ /\ 1000\ >\ tFrameDurationMillis)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delay(NEC\_REPEAT\_PERIOD\ /\ 1000\ -\/\ tFrameDurationMillis);}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ \}}

\end{DoxyCode}
\Hypertarget{group__TinyReceiver_gaa97ef3a9ba3e40bd50a906788b65e79a}\index{Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}!TinyReceiverDecode@{TinyReceiverDecode}}
\index{TinyReceiverDecode@{TinyReceiverDecode}!Minimal receiver for NEC and FAST protocol@{Minimal receiver for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{TinyReceiverDecode()}{TinyReceiverDecode()}}
{\footnotesize\ttfamily \label{group__TinyReceiver_gaa97ef3a9ba3e40bd50a906788b65e79a} 
bool Tiny\+Receiver\+Decode (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{keywordtype}{bool}\ tJustWritten\ =\ TinyIRReceiverData.\mbox{\hyperlink{structTinyIRReceiverCallbackDataStruct_aff079c5dbb9e3bb1aa10907f8f89bebe}{justWritten}};}
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{keywordflow}{if}\ (tJustWritten)\ \{}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ TinyIRReceiverData.\mbox{\hyperlink{structTinyIRReceiverCallbackDataStruct_aff079c5dbb9e3bb1aa10907f8f89bebe}{justWritten}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00435\ \ \ \ \ \}}
\DoxyCodeLine{00436\ \ \ \ \ \textcolor{keywordflow}{return}\ tJustWritten;}
\DoxyCodeLine{00437\ \}}

\end{DoxyCode}
