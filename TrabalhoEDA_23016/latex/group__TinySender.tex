\doxysection{Minimal sender for NEC and FAST protocol}
\hypertarget{group__TinySender}{}\label{group__TinySender}\index{Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{group__TinySender_ga4cb394b3b749f9302940902fb05bd920}\label{group__TinySender_ga4cb394b3b749f9302940902fb05bd920} 
\#define {\bfseries IR\+\_\+\+SEND\+\_\+\+PIN}~3
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group__TinySender_ga1cc15240b7357116480a33cbc5ff4a06}{send\+Mark}} (uint8\+\_\+t a\+Send\+Pin, unsigned int a\+Mark\+Micros)
\item 
void \mbox{\hyperlink{group__TinySender_gaff8e9e20a15795c5e211407f62166637}{send\+ONKYO}} (uint8\+\_\+t a\+Send\+Pin, uint16\+\_\+t a\+Address, uint16\+\_\+t a\+Command, uint\+\_\+fast8\+\_\+t a\+Number\+Of\+Repeats, bool a\+Send\+NEC2\+Repeats)
\item 
void \mbox{\hyperlink{group__TinySender_ga693e3c08170e163489b7c73c595c060e}{send\+NECMinimal}} (uint8\+\_\+t a\+Send\+Pin, uint16\+\_\+t a\+Address, uint16\+\_\+t a\+Command, uint\+\_\+fast8\+\_\+t a\+Number\+Of\+Repeats)
\item 
void \mbox{\hyperlink{group__TinySender_ga0a4a942fdd78fd7e5f6a54b0c7251ff7}{send\+NEC}} (uint8\+\_\+t a\+Send\+Pin, uint16\+\_\+t a\+Address, uint16\+\_\+t a\+Command, uint\+\_\+fast8\+\_\+t a\+Number\+Of\+Repeats, bool a\+Send\+NEC2\+Repeats)
\item 
void \mbox{\hyperlink{group__TinySender_ga397e1b9d2e6457c3707ea35e85008415}{send\+Extended\+NEC}} (uint8\+\_\+t a\+Send\+Pin, uint16\+\_\+t a\+Address, uint16\+\_\+t a\+Command, uint\+\_\+fast8\+\_\+t a\+Number\+Of\+Repeats, bool a\+Send\+NEC2\+Repeats)
\item 
void \mbox{\hyperlink{group__TinySender_gac2a48685f769fa815bb473f6c97c9677}{send\+Fast8\+Bit\+And\+Parity}} (uint8\+\_\+t a\+Send\+Pin, uint8\+\_\+t a\+Command, uint\+\_\+fast8\+\_\+t a\+Number\+Of\+Repeats)
\item 
void \mbox{\hyperlink{group__TinySender_ga03e7b24211df9d9b321032bf11449df8}{send\+FAST}} (uint8\+\_\+t a\+Send\+Pin, uint16\+\_\+t a\+Command, uint\+\_\+fast8\+\_\+t a\+Number\+Of\+Repeats)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Function Documentation}
\Hypertarget{group__TinySender_ga397e1b9d2e6457c3707ea35e85008415}\index{Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}!sendExtendedNEC@{sendExtendedNEC}}
\index{sendExtendedNEC@{sendExtendedNEC}!Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendExtendedNEC()}{sendExtendedNEC()}}
{\footnotesize\ttfamily \label{group__TinySender_ga397e1b9d2e6457c3707ea35e85008415} 
void send\+Extended\+NEC (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{uint16\+\_\+t}]{a\+Address}{, }\item[{uint16\+\_\+t}]{a\+Command}{, }\item[{uint\+\_\+fast8\+\_\+t}]{a\+Number\+Of\+Repeats}{, }\item[{bool}]{a\+Send\+NEC2\+Repeats}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00235\ \ \ \ \ pinModeFast(aSendPin,\ OUTPUT);}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ uint\_fast8\_t\ tNumberOfCommands\ =\ aNumberOfRepeats\ +\ 1;}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordflow}{while}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ tStartOfFrameMillis\ =\ millis();}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_HEADER\_MARK);}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((!aSendNEC2Repeats)\ \&\&\ (tNumberOfCommands\ <\ aNumberOfRepeats\ +\ 1))\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ the\ NEC\ special\ repeat}}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_REPEAT\_HEADER\_SPACE);\ \textcolor{comment}{//\ -\/\ 2250}}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ header}}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_HEADER\_SPACE);}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{unionLongUnion}{LongUnion}}\ tData;}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ tData.UWord.LowWord\ =\ aAddress;}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (aCommand\ >\ 0xFF)\ \{}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UWord.HighWord\ =\ aCommand;}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UByte.MidHighByte\ =\ aCommand;}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UByte.HighByte\ =\ \string~aCommand;\ \textcolor{comment}{//\ LSB\ first}}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Send\ data}}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint\_fast8\_t\ i\ =\ 0;\ i\ <\ NEC\_BITS;\ ++i)\ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_BIT\_MARK);\ \textcolor{comment}{//\ constant\ mark\ length}}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tData.ULong\ \&\ 1)\ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_ONE\_SPACE);}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_ZERO\_SPACE);}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.ULong\ >>=\ 1;\ \textcolor{comment}{//\ shift\ command\ for\ next\ bit}}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ stop\ bit}}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_BIT\_MARK);}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ tNumberOfCommands-\/-\/;}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ skip\ last\ delay!}}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00274\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Check\ and\ fallback\ for\ wrong\ RepeatPeriodMillis\ parameter.\ I.e\ the\ repeat\ period\ must\ be\ greater\ than\ each\ frame\ duration.}}
\DoxyCodeLine{00275\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tFrameDurationMillis\ =\ millis()\ -\/\ tStartOfFrameMillis;}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (NEC\_REPEAT\_PERIOD\ /\ 1000\ >\ tFrameDurationMillis)\ \{}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delay(NEC\_REPEAT\_PERIOD\ /\ 1000\ -\/\ tFrameDurationMillis);}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00281\ \ \ \ \ \}}
\DoxyCodeLine{00282\ \}}

\end{DoxyCode}
\Hypertarget{group__TinySender_ga03e7b24211df9d9b321032bf11449df8}\index{Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}!sendFAST@{sendFAST}}
\index{sendFAST@{sendFAST}!Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendFAST()}{sendFAST()}}
{\footnotesize\ttfamily \label{group__TinySender_ga03e7b24211df9d9b321032bf11449df8} 
void send\+FAST (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{uint16\+\_\+t}]{a\+Command}{, }\item[{uint\+\_\+fast8\+\_\+t}]{a\+Number\+Of\+Repeats}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00295\ \ \ \ \ pinModeFast(aSendPin,\ OUTPUT);}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ uint\_fast8\_t\ tNumberOfCommands\ =\ aNumberOfRepeats\ +\ 1;}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordflow}{while}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ tStartOfFrameMillis\ =\ millis();}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ header}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ FAST\_HEADER\_MARK);}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ delayMicroseconds(FAST\_HEADER\_SPACE);}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ uint16\_t\ tData;}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00306\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ The\ compiler\ is\ intelligent\ and\ removes\ the\ code\ for\ "{}(aCommand\ >\ 0xFF)"{}\ if\ we\ are\ called\ with\ an\ uint8\_t\ command\ :-\/).}}
\DoxyCodeLine{00307\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ Using\ an\ uint16\_t\ command\ requires\ additional\ 56\ bytes\ program\ memory.}}
\DoxyCodeLine{00308\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (aCommand\ >\ 0xFF)\ \{}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ tData\ =\ aCommand;}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ tData\ =\ aCommand\ |\ (((uint8\_t)\ (\string~aCommand))\ <<\ 8);\ \textcolor{comment}{//\ LSB\ first}}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Send\ data}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint\_fast8\_t\ i\ =\ 0;\ i\ <\ FAST\_BITS;\ ++i)\ \{}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ FAST\_BIT\_MARK);\ \textcolor{comment}{//\ constant\ mark\ length}}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tData\ \&\ 1)\ \{}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(FAST\_ONE\_SPACE);}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(FAST\_ZERO\_SPACE);}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ tData\ >>=\ 1;\ \textcolor{comment}{//\ shift\ command\ for\ next\ bit}}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ stop\ bit}}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ FAST\_BIT\_MARK);}
\DoxyCodeLine{00327\ }
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ tNumberOfCommands-\/-\/;}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ skip\ last\ delay!}}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00332\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Check\ and\ fallback\ for\ wrong\ RepeatPeriodMillis\ parameter.\ I.e\ the\ repeat\ period\ must\ be\ greater\ than\ each\ frame\ duration.}}
\DoxyCodeLine{00333\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tFrameDurationMillis\ =\ millis()\ -\/\ tStartOfFrameMillis;}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (FAST\_REPEAT\_PERIOD\ /\ 1000\ >\ tFrameDurationMillis)\ \{}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delay(FAST\_REPEAT\_PERIOD\ /\ 1000\ -\/\ tFrameDurationMillis);}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00339\ \ \ \ \ \}}
\DoxyCodeLine{00340\ \}}

\end{DoxyCode}
\Hypertarget{group__TinySender_gac2a48685f769fa815bb473f6c97c9677}\index{Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}!sendFast8BitAndParity@{sendFast8BitAndParity}}
\index{sendFast8BitAndParity@{sendFast8BitAndParity}!Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendFast8BitAndParity()}{sendFast8BitAndParity()}}
{\footnotesize\ttfamily \label{group__TinySender_gac2a48685f769fa815bb473f6c97c9677} 
void send\+Fast8\+Bit\+And\+Parity (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{uint8\+\_\+t}]{a\+Command}{, }\item[{uint\+\_\+fast8\+\_\+t}]{a\+Number\+Of\+Repeats}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00288\ \ \ \ \ sendFAST(aSendPin,\ aCommand,\ aNumberOfRepeats);}
\DoxyCodeLine{00289\ \}}

\end{DoxyCode}
\Hypertarget{group__TinySender_ga1cc15240b7357116480a33cbc5ff4a06}\index{Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}!sendMark@{sendMark}}
\index{sendMark@{sendMark}!Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendMark()}{sendMark()}}
{\footnotesize\ttfamily \label{group__TinySender_ga1cc15240b7357116480a33cbc5ff4a06} 
void send\+Mark (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{unsigned int}]{a\+Mark\+Micros}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ tStartMicros\ =\ micros();}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ tNextPeriodEnding\ =\ tStartMicros;}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ tMicros;}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00076\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ Generate\ pulse}}
\DoxyCodeLine{00077\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ noInterrupts();\ \textcolor{comment}{//\ do\ not\ let\ interrupts\ extend\ the\ short\ on\ period}}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ digitalWriteFast(aSendPin,\ HIGH);}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ delayMicroseconds(8);\ \textcolor{comment}{//\ 8\ us\ for\ a\ 30\ \%\ duty\ cycle\ for\ 38\ kHz}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ digitalWriteFast(aSendPin,\ LOW);}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ interrupts();\ \textcolor{comment}{//\ Enable\ interrupts\ -\/\ to\ keep\ micros\ correct-\/\ for\ the\ longer\ off\ period\ 3.4\ us\ until\ receive\ ISR\ is\ active\ (for\ 7\ us\ +\ pop's)}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00085\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ PWM\ pause\ timing\ and\ end\ check}}
\DoxyCodeLine{00086\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ Minimal\ pause\ duration\ is\ 4.3\ us}}
\DoxyCodeLine{00087\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ tNextPeriodEnding\ +=\ 26;\ \textcolor{comment}{//\ for\ 38\ kHz}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ tMicros\ =\ micros();\ \textcolor{comment}{//\ we\ have\ only\ 4\ us\ resolution\ for\ AVR\ @16MHz}}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00092\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Exit\ the\ forever\ loop\ if\ aMarkMicros\ has\ reached}}
\DoxyCodeLine{00093\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ tDeltaMicros\ =\ tMicros\ -\/\ tStartMicros;}
\DoxyCodeLine{00095\ \textcolor{preprocessor}{\#if\ defined(\_\_AVR\_\_)}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Just\ getting\ variables\ and\ check\ for\ end\ condition\ takes\ minimal\ 3.8\ us}}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tDeltaMicros\ >=\ aMarkMicros\ -\/\ (112\ /\ (F\_CPU\ /\ MICROS\_IN\_ONE\_SECOND)))\ \{\ \textcolor{comment}{//\ To\ compensate\ for\ call\ duration\ -\/\ 112\ is\ an\ empirical\ value}}
\DoxyCodeLine{00098\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tDeltaMicros\ >=\ aMarkMicros)\ \{}
\DoxyCodeLine{00100\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (tMicros\ <\ tNextPeriodEnding);}
\DoxyCodeLine{00104\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\textcolor{keyword}{true});}
\DoxyCodeLine{00105\ \}}

\end{DoxyCode}
\Hypertarget{group__TinySender_ga0a4a942fdd78fd7e5f6a54b0c7251ff7}\index{Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}!sendNEC@{sendNEC}}
\index{sendNEC@{sendNEC}!Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendNEC()}{sendNEC()}}
{\footnotesize\ttfamily \label{group__TinySender_ga0a4a942fdd78fd7e5f6a54b0c7251ff7} 
void send\+NEC (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{uint16\+\_\+t}]{a\+Address}{, }\item[{uint16\+\_\+t}]{a\+Command}{, }\item[{uint\+\_\+fast8\+\_\+t}]{a\+Number\+Of\+Repeats}{, }\item[{bool}]{a\+Send\+NEC2\+Repeats}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00169\ \ \ \ \ pinModeFast(aSendPin,\ OUTPUT);}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ uint\_fast8\_t\ tNumberOfCommands\ =\ aNumberOfRepeats\ +\ 1;}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keywordflow}{while}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ tStartOfFrameMillis\ =\ millis();}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_HEADER\_MARK);}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((!aSendNEC2Repeats)\ \&\&\ (tNumberOfCommands\ <\ aNumberOfRepeats\ +\ 1))\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ the\ NEC\ special\ repeat}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_REPEAT\_HEADER\_SPACE);\ \textcolor{comment}{//\ -\/\ 2250}}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ header}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_HEADER\_SPACE);}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{unionLongUnion}{LongUnion}}\ tData;}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00184\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ The\ compiler\ is\ intelligent\ and\ removes\ the\ code\ for\ "{}(aAddress\ >\ 0xFF)"{}\ if\ we\ are\ called\ with\ an\ uint8\_t\ address\ :-\/).}}
\DoxyCodeLine{00185\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Using\ an\ uint16\_t\ address\ requires\ additional\ 28\ bytes\ program\ memory.}}
\DoxyCodeLine{00186\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (aAddress\ >\ 0xFF)\ \{}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UWord.LowWord\ =\ aAddress;}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UByte.LowByte\ =\ aAddress;\ \textcolor{comment}{//\ LSB\ first}}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UByte.MidLowByte\ =\ \string~aAddress;}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (aCommand\ >\ 0xFF)\ \{}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UWord.HighWord\ =\ aCommand;}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UByte.MidHighByte\ =\ aCommand;}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.UByte.HighByte\ =\ \string~aCommand;\ \textcolor{comment}{//\ LSB\ first}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Send\ data}}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint\_fast8\_t\ i\ =\ 0;\ i\ <\ NEC\_BITS;\ ++i)\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_BIT\_MARK);\ \textcolor{comment}{//\ constant\ mark\ length}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tData.ULong\ \&\ 1)\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_ONE\_SPACE);}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_ZERO\_SPACE);}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.ULong\ >>=\ 1;\ \textcolor{comment}{//\ shift\ command\ for\ next\ bit}}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ stop\ bit}}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_BIT\_MARK);}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ tNumberOfCommands-\/-\/;}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ skip\ last\ delay!}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00217\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Check\ and\ fallback\ for\ wrong\ RepeatPeriodMillis\ parameter.\ I.e\ the\ repeat\ period\ must\ be\ greater\ than\ each\ frame\ duration.}}
\DoxyCodeLine{00218\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tFrameDurationMillis\ =\ millis()\ -\/\ tStartOfFrameMillis;}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (NEC\_REPEAT\_PERIOD\ /\ 1000\ >\ tFrameDurationMillis)\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delay(NEC\_REPEAT\_PERIOD\ /\ 1000\ -\/\ tFrameDurationMillis);}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00224\ \ \ \ \ \}}
\DoxyCodeLine{00225\ \}}

\end{DoxyCode}
\Hypertarget{group__TinySender_ga693e3c08170e163489b7c73c595c060e}\index{Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}!sendNECMinimal@{sendNECMinimal}}
\index{sendNECMinimal@{sendNECMinimal}!Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendNECMinimal()}{sendNECMinimal()}}
{\footnotesize\ttfamily \label{group__TinySender_ga693e3c08170e163489b7c73c595c060e} 
void send\+NECMinimal (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{uint16\+\_\+t}]{a\+Address}{, }\item[{uint16\+\_\+t}]{a\+Command}{, }\item[{uint\+\_\+fast8\+\_\+t}]{a\+Number\+Of\+Repeats}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00166\ \ \ \ \ sendNEC(aSendPin,\ aAddress,\ aCommand,\ aNumberOfRepeats);\ \textcolor{comment}{//\ sendNECMinimal()\ is\ deprecated}}
\DoxyCodeLine{00167\ \}}

\end{DoxyCode}
\Hypertarget{group__TinySender_gaff8e9e20a15795c5e211407f62166637}\index{Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}!sendONKYO@{sendONKYO}}
\index{sendONKYO@{sendONKYO}!Minimal sender for NEC and FAST protocol@{Minimal sender for NEC and FAST protocol}}
\doxysubsubsection{\texorpdfstring{sendONKYO()}{sendONKYO()}}
{\footnotesize\ttfamily \label{group__TinySender_gaff8e9e20a15795c5e211407f62166637} 
void send\+ONKYO (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+Send\+Pin}{, }\item[{uint16\+\_\+t}]{a\+Address}{, }\item[{uint16\+\_\+t}]{a\+Command}{, }\item[{uint\+\_\+fast8\+\_\+t}]{a\+Number\+Of\+Repeats}{, }\item[{bool}]{a\+Send\+NEC2\+Repeats}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00115\ \ \ \ \ pinModeFast(aSendPin,\ OUTPUT);}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ uint\_fast8\_t\ tNumberOfCommands\ =\ aNumberOfRepeats\ +\ 1;}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordflow}{while}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ tStartOfFrameMillis\ =\ millis();}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_HEADER\_MARK);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((!aSendNEC2Repeats)\ \&\&\ (tNumberOfCommands\ <\ aNumberOfRepeats\ +\ 1))\ \{}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ the\ NEC\ special\ repeat}}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_REPEAT\_HEADER\_SPACE);\ \textcolor{comment}{//\ -\/\ 2250}}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ header}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_HEADER\_SPACE);}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{unionLongUnion}{LongUnion}}\ tData;}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ tData.UWord.LowWord\ =\ aAddress;}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ tData.UWord.HighWord\ =\ aCommand;}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Send\ data}}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint\_fast8\_t\ i\ =\ 0;\ i\ <\ NEC\_BITS;\ ++i)\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_BIT\_MARK);\ \textcolor{comment}{//\ constant\ mark\ length}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tData.ULong\ \&\ 1)\ \{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_ONE\_SPACE);}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delayMicroseconds(NEC\_ZERO\_SPACE);}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tData.ULong\ >>=\ 1;\ \textcolor{comment}{//\ shift\ command\ for\ next\ bit}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \textcolor{comment}{//\ send\ stop\ bit}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ sendMark(aSendPin,\ NEC\_BIT\_MARK);}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ tNumberOfCommands-\/-\/;}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ skip\ last\ delay!}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tNumberOfCommands\ >\ 0)\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00148\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ Check\ and\ fallback\ for\ wrong\ RepeatPeriodMillis\ parameter.\ I.e\ the\ repeat\ period\ must\ be\ greater\ than\ each\ frame\ duration.}}
\DoxyCodeLine{00149\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tFrameDurationMillis\ =\ millis()\ -\/\ tStartOfFrameMillis;}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (NEC\_REPEAT\_PERIOD\ /\ 1000\ >\ tFrameDurationMillis)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delay(NEC\_REPEAT\_PERIOD\ /\ 1000\ -\/\ tFrameDurationMillis);}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ \}}

\end{DoxyCode}
